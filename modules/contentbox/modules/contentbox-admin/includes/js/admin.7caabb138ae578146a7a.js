(self.webpackChunkcontentbox_cms=self.webpackChunkcontentbox_cms||[]).push([[379],{2126:(e,t,a)=>{"use strict";var n=a(9479),o=a(8901),i=a.n(o),r=a(7126),l=a(1884),s=a(6486);a(9178),a(6062),a(5831),a(3099),a(8678),a(3871),window.contentListHelper=a(2887).Z,window.bootbox=a(1369);const d=/[a-z]/,c=/[A-Z]/,u=/[0-9]/,f=/[0-9].*[0-9]/,h=/[^a-zA-Z0-9]/,m=l("#confirmIt"),g=l("#modal"),w={animation:"slide",delay:{show:100,hide:100}};document.addEventListener("DOMContentLoaded",(()=>{"no"==l("body").attr("data-showsidebar")&&toggleSidebar(),void 0!==l("#main-content-sidebar").attr("id")&&l("#main-content-sidebar-trigger").fadeIn(),attachModalListeners(),activateContentSearch(),activateConfirmations(),activateTooltips(),activateNavbarState(),activateToggleCheckboxes(),l.validator.setDefaults({ignore:[],highlight:function(e){l(e).closest(".form-group").removeClass("success").addClass("error")},success:function(e){e.text("Field is valid").addClass("valid").closest(".form-group").removeClass("error").addClass("success"),e.remove()},errorPlacement:function(e,t){if(l(t).is(":hidden"))return!1;e.appendTo(t.closest("div.controls"))}}),l.fn.resetValidations=function(){let e=this[0].currentForm;return l(e).find(".form-group").each((function(){l(this).removeClass("error").removeClass("success")})),l(e).find(":input").each((function(){l(this).removeClass("error").removeClass("valid")})),this},l.fn.clearForm=function(){if(void 0!==this.data("validator"))return this.data("validator").resetForm(),this.find(":input").each((function(){switch(this.type){case"password":case"hidden":case"select-multiple":case"select-one":case"text":case"textarea":l(this).val("");break;case"checkbox":case"radio":this.checked=!1}})),l(this.data("validator")).resetValidations(),this},l.fn.collect=function(){let e=this.serializeArray(),t={};return l.each(e,(function(e,a){t[a.name]=a.value})),t};setTimeout(toggleFlickers(),5e3);l((function(){let e=l('[href="'+location.hash+'"]');e&&e.tab("show")})),(0,n.ZP)(window,{"Control+K":()=>(l("#nav-search").focus(),!1)}),l("[data-keybinding]").each((function(){let e=l(this);(0,n.ZP)(window,{[e.data("keybinding")]:()=>{e.attr("onclick")?e.click():to(e.attr("href"))}})})),l("#main-navbar li.nav-dropdown").each((function(){l(this).find("ul.nav-sub li").length||l(this).hide()})),l(".accordion[data-stateful]").each((function(){let e,t=l(this),a=t.data("stateful");a&&(e=l.cookie(a),null!==e&&(t.find(".collapse").removeClass("in"),l("#"+e).addClass("in"))),t.bind("shown.bs.collapse",(function(){let e=t.find(".in").attr("id");l.cookie(a,e)}))}))})),window.activateNavbarState=function(){l("#toggle-left").on("click",(function(e){if(l(window).width()>768){let e=l("#container").hasClass("sidebar-mini");l.ajax({url:l("body").attr("data-preferenceURL"),data:{value:e,preference:"sidemenuCollapse"},async:!0})}}))},window.isMainSidebarOpen=function(){let e=l("#main-content-sidebar");return void 0!==e.attr("id")&&"block"===e.css("display")},window.toggleSidebar=function(){let e=l("#main-content-sidebar"),t=e.css("display"),a=!1;void 0!==t&&("block"===t?(e.fadeOut(),l("#main-content-sidebar-trigger i").removeClass("fa-minus-square").addClass("fa-plus-square"),l("#main-content-slot").removeClass("col-md-8").addClass("col-md-12")):(l("#main-content-sidebar-trigger i").removeClass("fa-plus-square").addClass("fa-minus-square"),e.fadeIn(),l("#main-content-slot").removeClass("col-md-12").addClass("col-md-8"),a=!0),l.ajax({url:l("body").attr("data-preferenceURL"),data:{value:a,preference:"sidebarstate"},async:!0}))},window.adminAction=function(e,t){"null"!=e&&(l("#adminActionsIcon").addClass("fa-spin textOrange"),l.post(t,{targetModule:e},(function(e){e.ERROR?adminNotifier("error","<i class='fa-exclamation-sign'></i> <strong>Error running action, check logs!</strong>"):adminNotifier("info","<i class='fa-exclamation-sign'></i> <strong>Action Ran, Booya!</strong>"),l("#adminActionsIcon").removeClass("fa-spin textOrange")})))},window.adminNotifier=function(e,t,a){switch(i().options={closeButton:!0,preventDuplicates:!0,progressBar:!0,showDuration:"300",timeOut:"2000",positionClass:"toast-top-center"},e){case"info":default:i().info(t);break;case"error":i().error(t);break;case"success":i().success(t);break;case"warning":i().warning(t)}},window.activateContentSearch=function(){let e=l("#nav-search"),t=l("#div-search-results");e.css("opacity","0.8"),e.focusin((function(){l(this).animate({opacity:1},500,(function(){}))})).blur((function(){l(this).animate({opacity:.5},500,(function(){}))})),e.keyup(s.debounce((function(){let e=l(this);e.val().length>1&&t.load(l("#nav-search-url").val(),{search:e.val()},(function(e){"none"===t.css("display")&&t.fadeIn().slideDown()}))}),300)),l("body").click((function(e){l(e.target).closest("#div-search").length||closeSearchBox()}))},window.closeSearchBox=function(){l("#div-search-results").slideUp(),l("#nav-search").val("")},window.quickLinks=function(e){"null"!=e&&(window.location=e)},window.activateTooltips=function(){l("[title]").tooltip(w)},window.hideAllTooltips=function(){l(".tooltip").hide()},window.toggleFlickers=function(){l(".flickerMessages").slideToggle(),l(".flickers").fadeOut(3e3)},window.closeRemoteModal=function(){g.modal("hide")},window.resetContainerForms=function(e){let t=e.find("form");t.length&&l(t[0]).clearForm()},window.closeModal=function(e){e.modal("hide")},window.openModal=function(e,t,a){e.modal(),l(e).on("hidden.bs.modal",(function(){resetContainerForms(l(this))}))},window.openRemoteModal=function(e,t,a,n,o){if(!e)return void console.log("URL needed");let i=g,r=l(window).height()-200,s=.85*l(window).width();i.data("url",e),i.data("params",t),i.data("width",void 0!==a?a:s),i.data("height",void 0!==n?n:r);let d=i.data("height");return d.search&&-1!==d.search("%")&&(d=d.replace("%","")/100,d=l(window).height()*d),d>r&&(d=r),i.data("height",d),o?(i.data("delay",!0),i.modal()):i.load(e,t,(function(){i.modal()})),!0},window.setPreviewSize=function(e,t){let a=g.find(".modal-dialog"),n=(l("#previewFrame").length&&l("#previewFrame"),{width:g.data("width")}),o={width:t};(!t||o.width>n.width)&&(o={width:n.width}),g.find(".header-title").toggle(o.width>600),l(e).siblings(".btn-primary").removeClass("btn-primary").addClass("btn-info"),l(e).removeClass("btn-info").addClass("btn-primary"),a.animate(o,500)},window.attachModalListeners=function(){g.on("show.bs.modal",(function(){let e=g;e.find(".modal-dialog").css({width:e.data("width"),height:e.data("height")})})),g.on("shown.bs.modal",(function(){let e=g;e.data("delay")&&e.load(e.data("url"),e.data("params"),(function(){e.find(".modal-dialog").css({width:e.data("width"),height:e.data("height")})}))})),g.on("hidden.bs.modal",(function(){let e=g;e.html('<div class="modal-header"><h3>Loading...</h3></div><div class="modal-body" id="removeModelContent"><i class="fa fa-spinner fa-spin fa-lg fa-4x"></i></div>'),resetContainerForms(e)}))},window.activateToggleCheckboxes=function(){l('input[data-toggle="toggle"]').change((function(){let e=l(this).data("match");l("#"+e).val(l(this).prop("checked"))}))},window.closeConfirmations=function(){m.modal("hide")},window.activateConfirmations=function(){m.find("button").on("click",(function(e){"confirm"===l(this).attr("data-action")&&(m.find("#confirmItButtons").hide(),m.find("#confirmItLoader").fadeIn(),window.location=m.data("confirmSrc"))})),l(".confirmIt").click((function(e){m.find("#confirmItButtons").fadeIn(),m.find("#confirmItLoader").hide(),m.data("confirmSrc",l(this).attr("href"));let t=l(this).attr("data-message")?l(this).attr("data-message"):"Are you sure you want to perform this action?",a=l(this).attr("data-title")?l(this).attr("data-title"):"Are you sure?";m.find("#confirmItMessage").html(t),m.find("#confirmItTitle").html(a),m.modal(),e.preventDefault()}))},window.popup=function(e,t,a){let n=1e3,o=750;t&&(n=t),a&&(o=a);let i=screen.width/2-n/2,r=screen.height/2-o/2;window.open(e,"layoutPreview","resizable=yes,status=yes,location=no,menubar=no,toolbar=no,scrollbars=yes,width="+n+",height="+o+",left="+i+",top="+r+",screenX="+i+",screenY="+r)},window.to=function(e){return window.location=e,!1},window.checkAll=function(e,t){l("input[name='"+t+"']").each((function(){this.checked=e}))},window.checkByValue=function(e,t){l("input[name='"+e+"']").each((function(){this.value===t?this.checked=!0:this.checked=!1}))},window.getToday=function(e){return(e=null==e||e)?r.ou.now().toFormat("yyyy-LL-dd"):r.ou.now().toFormat("dd-MM-yyyy")},window.importContent=function(){let e=l("#importForm"),t=l("#importDialog");openModal(t,500,350),e.validate({submitHandler:function(t){e.find("#importButtonBar").slideUp(),e.find("#importBarLoader").slideDown(),t.submit()}}),e.find("#closeButton").click((function(e){return closeModal(t),!1})),e.find("#importButton").click((function(t){e.submit()}))},window.toggleMoreInfoPanel=function(e){l("#moreInfo-"+e).toggleClass("hidden"),l("#moreInfoOpenButton-"+e).toggleClass("hidden"),l("#moreInfoCloseButton-"+e).toggleClass("hidden")},window.passwordMeter=function(e){let t=l(this).val();l("#pw_rule_count").html(t.length);let a=l("#passwordRules").data("min-length"),n={lower:d.test(t),upper:c.test(t),digit:u.test(t),special:h.test(t)};t.length>=a?l("#pw_rule_count").addClass("badge-success"):l("#pw_rule_count").removeClass("badge-success");for(let e in n)n[e]?l("#pw_rule_"+e).addClass("badge-success"):l("#pw_rule_"+e).removeClass("badge-success")},window.passwordValidator=function(e){let t=l("#passwordRules").data("min-length"),a=d.test(e),n=c.test(e),o=u.test(e),i=(f.test(e),h.test(e));return a&&n&&o&&i&&e.length>=t},window.toLocalString=function(e,t){return new Date(e).toLocaleString(void 0,t||getDefaultDateTimeOptions())},window.toLocaleDateString=function(e,t){return new Date(e).toLocaleDateString(void 0,t||getDefaultDateTimeOptions())},window.toLocaleTimeString=function(e,t){return new Date(e).toLocaleTimeString(void 0,t||getDefaultDateTimeOptions())},window.getDefaultDateTimeOptions=function(){return{dateStyle:"medium",timeStyle:"long"}},window.scrollToHash=function(e){location.hash="#"+e},window.adminLink=function(e){let t=l("body").attr("data-adminURL");return null==e?t:t+"/"+e}},2887:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(1884),o=a(6486);const i=(()=>{const e={"Content-type":"application/json;charset=UTF-8"};var t="",a="",i="",r="",l="",s="",d="",c="",u="",f=!1,h=e=>{null==e&&(e={}),"search"in e||(e.search=""),"page"in e||(e.page=1),"parent"in e||(e.parent=""),"fAuthors"in e||(e.fAuthors="all"),"fCreators"in e||(e.fCreators="all"),"fCategories"in e||(e.fCategories="all"),"fStatus"in e||(e.fStatus="any"),"showAll"in e||(e.showAll=!1),a.css("opacity",.6);var t={page:e.page,parent:e.parent,fAuthors:e.fAuthors,fCategories:e.fCategories,fStatus:e.fStatus,showAll:e.showAll,fCreators:e.fCreators};t[l]=e.search,f=!0,a.load(i,t,(function(){f=!1,a.css("opacity",1),n(this).fadeIn("fast")}))},m=()=>{"all"!=n("#fAuthors").val()||"all"!=n("#fCreators").val()||"all"!=n("#fCategories").val()||"any"!=n("#fStatus").val()?n("#filterBox").addClass("selected"):n("#filterBox").removeClass("selected"),h({fAuthors:n("#fAuthors").val(),fCategories:n("#fCategories").val(),fStatus:n("#fStatus").val(),fCreators:n("#fCreators").val()})},g=e=>{e&&h(),n("#filterBox").removeClass("selected"),n("#fAuthors").val("all"),n("#fCategories").val("all"),n("#fStatus").val("any"),n("#fCreators").val("all")};return{init:e=>{t=e.adminEntryPoint,a=e.tableContainer,i=e.tableURL,r=e.searchField,l=e.searchName,s=e.contentForm,d=e.bulkStatusURL,c=e.cloneDialog,u=e.parentID,f=!1,History.Adapter.bind(window,"statechange",(function(){h({parent:History.getState().data.parent})})),r.keyup(o.debounce((function(){f||h({search:n(this).val()})}),300)),u.length?h({parent:u}):h({})},contentLoad:h,contentFilter:m,resetFilter:g,contentDrilldown:e=>{g(),null==e&&(e=""),r.val(""),History.pushState({parent:e},document.title,"?parent="+e),scrollToHash("container")},contentShowAll:()=>{g(),h({showAll:!0})},contentPaginate:e=>{h({search:r.val(),page:e,parent:History.getState().data.parent||u,fAuthors:n("#fAuthors").val(),fCategories:n("#fCategories").val(),fStatus:n("#fStatus").val(),fCreators:n("#fCreators").val()})},getInfoPanelContent:e=>n("#infoPanel_"+e).html(),activateInfoPanels:()=>{n(".popovers").popover({html:!0,content:function(){return getInfoPanelContent(n(this).attr("data-contentID"))},trigger:"hover",placement:"left",title:'<i class="fa fa-info-circle"></i> Quick Info',delay:{show:200,hide:500}})},activateQuickLook:(e,t)=>{e.find("tr").bind("contextmenu",(function(e){3===e.which&&null!=n(this).attr("data-contentID")&&(openRemoteModal(t+n(this).attr("data-contentID")),e.preventDefault())}))},remove:(e,t)=>{t=void 0!==t?t:"contentID",checkAll(!1,t),null!=e&&(n("#delete_"+e).removeClass("fa fa-minus-circle").addClass("fa fa-spinner fa-spin"),checkByValue(t,e)),s.submit()},bulkRemove:()=>{s.submit()},exportSelected:e=>{var t=[];n("#contentID:checked").each((function(){t.push(n(this).val())})),t.length?(checkAll(!1,"contentID"),window.open(e+"/contentID/"+t)):alert("Please select something to export!")},bulkChangeStatus:(e,t)=>{s.attr("action",d),s.find("#contentStatus").val(e),null!=t&&(n("#status_"+recordID).removeClass("fa fa-minus-circle").addClass("fa fa-spinner fa-spin"),checkByValue("contentID",t)),s.submit()},openCloneDialog:(e,t)=>{var a=c.find("#cloneForm");openModal(c,500),a.validate({submitHandler:function(e){c.find("#cloneButtonBar").slideUp(),c.find("#clonerBarLoader").slideDown(),e.submit()}}),a.find("#contentID").val(e),a.find("#title").val(t).focus(),c.find("#cloneButton").click((function(e){a.submit()}))},resetHits:a=>{a.length&&fetch(t+"/content/resetHits",{method:"POST",headers:e,body:JSON.stringify({contentID:a})}).then((e=>e.json())).then((e=>{e.error?alert("Error Reseting Hits: "+e.messages.join(",")):(adminNotifier("info",e.messages.join("<br>"),3e3),m())})).catch((e=>{alert("Error Reseting Hits: "+e)}))},resetBulkHits:()=>{var e=[];n("#contentID:checked").each((function(){e.push(n(this).val())})),e.length&&resetHits(e.join(","))}}})()},5831:(e,t,a)=>{"use strict";a.r(t);var n=a(6961),o=a(7126),i=a(1884);const r="autosave_";window.resetAutoSave=function(){if(!Modernizr.localstorage)return;let e=r+window.location,t=localStorage.getItem(e);t&&(JSON.parse(t).forEach(((e,t)=>{localStorage.removeItem(e)})),localStorage.setItem(e,"[]"))},window.autoSave=function(e,t,a,l){if(!Modernizr.localstorage)return i("#"+a).find(".autoSaveBtn").html("Auto Save Unavailable").addClass("disabled"),!1;let s=i.extend({},{storeMax:10,timeout:4e3},l||{}),d=e.attr("id"),c=r+window.location,u=0,f=!1;localStorage.getItem(c)||localStorage.setItem(c,"[]");let h=JSON.parse(localStorage.getItem(c)),m=function(e){h.push(e),h.length>s.storeMax?function(e){let t=h.length-s.storeMax;for(let e=0;e<t;e++)localStorage.removeItem(h[e]),h.splice(e,1);e&&e()}(g):g()},g=function(){localStorage.setItem(c,JSON.stringify(h));let e="";for(let t=h.length;t--;){let a=o.ou.fromFormat(h[t].replace(d+"_",""),"t"),n=a.diffNow("hours").hours<1?a.toRelative():a.toFormat("MM/dd/yyyy h:mm a");e+='<li><a href="javascript:void(0)" data-id="'+h[t]+'">'+n+"</a></li>"}h.length||(e='<li><a href="javascript:void(0)">No Autosaves, type something :)</a></li>'),i("#"+a).find(".autoSaveMenu").html(e)},w=function(e){u&&clearTimeout(u),u=setTimeout(p,s.timeout,e)},p=function(e){if(f)w(e);else{f=!0;let e=d+"_"+Date.now();localStorage.setItem(e,(0,n.compressToUTF16)(getEditorContent())),m(e),f=!1}};getContentEditor().on("change",w),i("#"+a).on("click","li > a",(function(e){!function(e){let t=localStorage.getItem(e);setEditorContent("content",(0,n.decompressFromUTF16)(t)),u&&clearTimeout(u)}(i(e.currentTarget).data("id"))})),g()}},6062:(e,t,a)=>{var n=a(1884);const{template:o}=a(6486),{DateTime:i}=a(8565);window.getWidgetSelectorURL=function(){return $cbEditorConfig.adminEntryURL+"/widgets/editorselector"},window.getWidgetPreviewURL=function(){return $cbEditorConfig.adminEntryURL+"/widgets/preview"},window.getWidgetEditorURL=function(){return $cbEditorConfig.adminEntryURL+"/widgets/editinstance"},window.getWidgetInstanceURL=function(){return $cbEditorConfig.adminEntryURL+"/widgets/viewWidgetInstance"},window.getPageSelectorURL=function(){return $cbEditorConfig.adminEntryURL+"/pages/editorselector"},window.getEntrySelectorURL=function(){return $cbEditorConfig.isBlogDisabled?"":$cbEditorConfig.adminEntryURL+"/entries/editorselector"},window.getContentStoreSelectorURL=function(){return $cbEditorConfig.adminEntryURL+"/contentStore/editorselector"},window.getPreviewSelectorURL=function(){return $cbEditorConfig.adminEntryURL+"/content/preview"},window.getAuthorEditorPreferenceURL=function(){return $cbEditorConfig.adminEntryURL+"/authors/changeEditor"},window.getAuthorSavePreferenceURL=function(){return $cbEditorConfig.adminEntryURL+"/authors/saveSinglePreference"},window.getModuleURL=function(e,t,a){let o="";return n.ajax({url:$cbEditorConfig.adminEntryURL+"/modules/buildModuleLink",data:{module:e,moduleEvent:t,moduleQS:a},async:!1,success:function(e){o=e}}),o.trim()},window.loadAssetChooser=function(e,t,a){openRemoteModal($cbEditorConfig.adminEntryURL+"/ckFileBrowser/assetChooser?callback="+e,{},t||"75%",a)},window.switchEditor=function(e){n.ajax({url:getAuthorEditorPreferenceURL(),data:{editor:e},async:!1,success:function(e){location.reload()}})},window.setupEditors=function(e,t,a,o){$targetEditorForm=e,$targetEditorSaveURL=a,$uploaderBarLoader=$targetEditorForm.find("#uploadBarLoader"),$uploaderBarStatus=$targetEditorForm.find("#uploadBarLoaderStatus"),$excerpt=$targetEditorForm.find("#excerpt"),$content=$targetEditorForm.find("#content"),$isPublished=$targetEditorForm.find("#isPublished"),$contentID=$targetEditorForm.find("#contentID"),$changelog=$targetEditorForm.find("#changelog"),$slug=$targetEditorForm.find("#slug"),$publishingBar=$targetEditorForm.find("#publishingBar"),$actionBar=$targetEditorForm.find("#actionBar"),$publishButton=$targetEditorForm.find("#publishButton"),$withExcerpt=t||!0,$wasSubmitted=!1,$cbEditorStartup(),n("[type=date]").datepicker({format:"yyyy-mm-dd"}),n(".datepicker").datepicker({format:"yyyy-mm-dd"}),$targetEditorForm.validate({ignore:"content",submitHandler:function(e){try{updateEditorContent()}catch(e){console.log(e)}if($withExcerpt)try{updateEditorExcerpt()}catch(e){console.log(e)}$content.val().length?($slug.prop("disabled",!1),$publishButton.prop("disabled",!0),e.submit()):alert("Please enter some content!")}}),$cbEditorConfig.changelogMandatory&&$changelog.attr("required",$cbEditorConfig.changelogMandatory);let i=$targetEditorForm.find("#title");i.on("blur",(function(){$slug.prop("disabled")||createPermalink(i.val())})),$slug.on("blur",(function(){n(this).prop("disabled")||permalinkUniqueCheck()})),window.onbeforeunload=askLeaveConfirmation,n("#htmlKeywords").keyup((function(){n("#html_keywords_count").html(n("#htmlKeywords").val().length)})),n("#htmlDescription").keyup((function(){n("#html_description_count").html(n("#htmlDescription").val().length)})),n(".clockpicker").clockpicker(),autoSave($content,$contentID,"contentAutoSave");let r=n("#container");(o=o||!0)&&!n(r).hasClass("sidebar-mini")&&(n("body").removeClass("off-canvas-open"),n(r).toggleClass("sidebar-mini"))},window.shouldPublish=function(){return!$contentID.val().length||"true"!=$isPublished.val()||confirm("Your content is published already, quick saving it will draft it and unpublish it.If you want to re-publish, just hit Publish again.Are you sure you want to draft the content?")},window.quickSave=function(){if(!shouldPublish())return;if($isPublished.val("false"),n("td#publish-info").html('<span class="p5 label label-default">Draft</span>'),$changelog.val().length||$changelog.val("quick save"),!$targetEditorForm.valid())return adminNotifier("error","Form is not valid, please verify."),!1;if(!getEditorContent().length)return void alert("Please enter content before saving.");toggleLoaderBar(),$content.val().length||$content.val(getEditorContent());let e=!1;$slug.prop("disabled")&&($slug.prop("disabled",!1),e=!0),n.post($targetEditorSaveURL,$targetEditorForm.serialize(),(function(t){resetAutoSave(),$contentID.val(t.CONTENTID),$changelog.val(""),$uploaderBarLoader.fadeOut(1500),$uploaderBarStatus.html("Draft Saved!"),$isPublished.val("true"),e&&$slug.prop("disabled",!0),adminNotifier("info","Draft Saved!")}),"json")},window.previewContent=function(){openRemoteModal(getPreviewSelectorURL(),{content:getEditorContent(),layout:n("#layout").val(),title:n("#title").val(),slug:$slug.val(),contentType:n("#contentType").val(),markup:n("#markup").val(),parentContent:n("#parentContent").val()||""},n(window).width()-50,n(window).height()-200,!0)},window.publishNow=function(){const e=i.now();n("#publishedTime").val(e.toFormat("HH:mm")),n("#publishedDate").val(getToday())},window.switchMarkup=function(e){n("#markup").val(e),n("#markupLabel").html(e)},window.setWasSubmitted=function(){$wasSubmitted=!0},window.askLeaveConfirmation=function(){if(checkIsDirty()&&!$wasSubmitted)return"You have unsaved changes."},window.permalinkUniqueCheck=function(e){e=e||$slug.val(),(e=n.trim(e)).length&&n.getJSON($cbEditorConfig.slugCheckURL,{slug:e,contentID:n("#contentID").val(),contentType:n("#contentType").val()},(function(e){e.UNIQUE?n("#slugCheckErrors").html("").removeClass("alert alert-danger"):n("#slugCheckErrors").html("The permalink slug you entered is already in use, please enter another one or modify it.").addClass("alert alert-danger")}))},window.createPermalink=function(e){let t=$targetEditorForm.find("#title");(e=e||t.val()).length&&(togglePermalink(),n.get($cbEditorConfig.slugifyURL,{slug:e},(function(e){$slug.val(e),permalinkUniqueCheck(),togglePermalink()})))},window.togglePermalink=function(){let e=n("#togglePermalink");e.hasClass("fa fa-lock")?e.attr("class","fa fa-unlock"):e.attr("class","fa fa-lock"),$slug.prop("disabled",!$slug.prop("disabled"))},window.toggleDraft=function(){return!!shouldPublish()&&($isPublished.val("false"),setWasSubmitted(),!0)},window.quickPublish=function(e){if(e){if(!toggleDraft())return}else $isPublished.val("true"),setWasSubmitted();$cbEditorConfig.changelogMandatory&&!isMainSidebarOpen()&&toggleSidebar(),resetAutoSave(),$targetEditorForm.submit()},window.toggleLoaderBar=function(){$uploaderBarStatus.html("Saving..."),$uploaderBarLoader.slideToggle()},window.featuredImageCallback=function(e,t,a){n("#featuredImage").val().length&&cancelFeaturedImage(),n("#featuredImageControls").toggleClass("hide"),n("#featuredImage").val(e),n("#featuredImageURL").text(t),n("#featuredImagePreview").attr("src",t),closeRemoteModal()},window.cancelFeaturedImage=function(){n("#featuredImage").val(""),n("#featuredImageURL").val(""),n("#featuredImagePreview").attr("src",""),n("#featuredImageControls").toggleClass("hide")},window.onContentTemplateChange=function(e){let t=e.target.value;if(t&&"null"!=t)return confirm("Changing the content template may add new custom fields and change values of this content item. Are you sure you want to do this?")?applyContentTemplate(t,!0):void 0},window.saveAsContentTemplate=function(){n("[name=saveAsTemplate]").val(!0),quickPublish(!0)},window.applyContentTemplate=function(e){e instanceof Event&&(e=e.currentTarget.value),"null"!=e?fetch(`/cbapi/v1/content-templates/${e}`,{headers:{Authorization:`Bearer ${window.authentication.access_token}`}}).then((e=>e.json())).then((e=>{n(".template-highlight-info").removeClass("hidden"),window.assignedTemplate=e.data,Object.keys(e.data.definition).forEach((t=>applyContentTemplateToField(t,e.data.definition)))})).catch((e=>{throw $dispatch("add-alert",{type:"api",class:"danger",message:e.toString()}),e})):(n(".template-highlight-info").addClass("hidden"),n(".template-restricted").removeClass("template-restricted"),n(".template-defined").removeClass("template-defined"))},window.announceModifiedByTemplate=function(){document.getElementById("contentID").value&&!window.alerts.some((e=>"template"==e.type))&&$dispatch("add-alert",{type:"template",class:"warning",message:"This content item has been modified by changes to the assigned template. You will need to re-save or re-publish this item for the template changes to take effect."})},window.applyContentTemplateToField=function(e,t){if(console.log(t),t.hasOwnProperty(e))switch(e){case"customFields":t.customFields.value.forEach((t=>{let a=document.getElementById("customFields");if(!(!a.getElementsByClassName("customFieldKey").length||!Array.from(a.getElementsByClassName("customFieldKey")).some((e=>e.value==t.name)))){let n=Array.from(a.getElementsByClassName("customFieldKey")).findIndex((e=>e.value==t.name)),o=a.getElementsByClassName("customFieldValue")[n];!o.value&&t.defaultValue&&(o.value=t.defaultValue,console.log("exisiting custom field modified: "+e),announceModifiedByTemplate())}else $dispatch("add-custom-field",{key:t.name,value:t.defaultValue}),console.log("custom field created: "+e),announceModifiedByTemplate()}));break;case"categories":t.categories.value.forEach((e=>n(`[value=${e}]`,"#categoriesChecks").attr("checked","checked").attr("readonly","readonly").parent().addClass("template-defined").addClass("template-restricted")));break;default:{let a=n(`[name=${e}]`);if(a.length){switch(a[0].nodeType){case"radio":case"checkbox":a.each((a=>{a.prop("value")==t[e].value&&(a.prop("checked")||(a.click(),console.log("checkbox modified: "+e),announceModifiedByTemplate()),a.attr("readonly","readonly").parent().addClass("template-restricted").addClass("template-defined"))}));break;default:if("select"==a[0].localName){"boolean"==typeof t[e].value&&(t[e].value=t[e].value?"Yes":"No");let o=n("option",a);o.each((a=>{let i=n(o[a]);(Array.isArray(t[e].value)?t[e].value:t[e].value.split(",")).indexOf(i.val())>-1&&!i.attr("selected")&&(i.attr("selected",!0),console.log("select modified: "+e),announceModifiedByTemplate())})),a.attr("multiple")||a.attr("readonly","readonly").addClass("template-restricted"),a.parent().addClass("template-defined")}else!a.val()&&t[e].value&&("content"==e||"excerpt"==e?setEditorContent(e,t[e].value):a.val(t[e].value),a.parent().addClass("template-defined"),announceModifiedByTemplate())}}else console.warn(`A field matching the name of ${e} could not be found in the rendered editor. This template field cannot be validated or applied.`)}}}},9178:(e,t,a)=>{var n=a(1884);window.fbCKSelect=function(e,t,a){if(e.length&&"dir"!==a){var n,o,i=(n=new RegExp("(?:[?&]|&amp;)"+"CKEditorFuncNum"+"=([^&]+)","i"),(o=window.location.search.match(n))&&o.length>1?o[1]:"");window.opener.CKEDITOR.tools.callFunction(i,t),window.close()}else alert("Please select a file first.")},window.fbGenericClose=function(){window.close()},window.fbTestChoose=function(e,t,a){alert("Path: "+e+"\n URL: "+t+"\n Type: "+a)},window.fbTestCancel=function(){alert("Cancel Called")},window.fbUpload=function(){n("#uploadBar").slideToggle()},window.fbVerifyActiveView=function(){let e="#"+$listType.val()+$listFolder.val();n(e).removeClass("btn-more").addClass("btn-default")}}},e=>{e.O(0,[79],(()=>{return t=2126,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=admin.7caabb138ae578146a7a.js.map