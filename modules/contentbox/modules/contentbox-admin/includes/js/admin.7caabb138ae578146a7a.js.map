{"version":3,"file":"modules/contentbox/modules/contentbox-admin/includes/js/admin.7caabb138ae578146a7a.js","mappings":"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","sources":["webpack://contentbox-cms/./modules/contentbox/modules/contentbox-admin/resources/assets/js/admin.js","webpack://contentbox-cms/./modules/contentbox/modules/contentbox-admin/resources/assets/js/contentList.js","webpack://contentbox-cms/./modules/contentbox/modules/contentbox-admin/resources/assets/js/editors/autosave.js","webpack://contentbox-cms/./modules/contentbox/modules/contentbox-admin/resources/assets/js/editors/editors.js","webpack://contentbox-cms/./modules/contentbox/modules/contentbox-admin/resources/assets/js/filebrowser.js"],"sourcesContent":["import tinyKeys from \"tinykeys\";\nimport toastr from \"toastr\";\nimport { DateTime } from \"luxon\";\n\nrequire( \"./filebrowser.js\" );\nrequire( \"./editors/editors.js\" );\nrequire( \"./editors/autosave.js\" );\nrequire ( \"@alpinejs/ui\" );\nrequire ( \"@alpinejs/focus\" );\nrequire( \"jquery-jcrop\" );\n\nwindow.contentListHelper = require( \"./contentList.js\" ).default;\nwindow.bootbox = require( \"bootbox\" );\n\n// GLOBAL STATIC\nconst REGEX_LOWER = /[a-z]/,\n\tREGEX_UPPER = /[A-Z]/,\n\tREGEX_DIGIT = /[0-9]/,\n\tREGEX_DIGITS = /[0-9].*[0-9]/,\n\tREGEX_SPECIAL = /[^a-zA-Z0-9]/;\n\n// setup global variables\nconst $confirmIt = $( \"#confirmIt\" );\nconst $remoteModal = $( \"#modal\" );\n// Global Tool Tip Settings\nconst toolTipSettings = {\n\tanimation : \"slide\",\n\tdelay     : { show: 100, hide: 100 }\n};\n\ndocument.addEventListener( \"DOMContentLoaded\", () => {\n\n\t// If the sidebar preference is off, toggle it\n\tif ( $( \"body\" ).attr( \"data-showsidebar\" ) == \"no\" ) {\n\t\ttoggleSidebar();\n\t}\n\t// If \"main-content-sidebar\" exists then bring toggler in\n\tif ( $( \"#main-content-sidebar\" ).attr( \"id\" ) !== undefined ) {\n\t\t$( \"#main-content-sidebar-trigger\" ).fadeIn();\n\t}\n\n\t// Attach modal listeners\n\tattachModalListeners();\n\t// Search Capabilities\n\tactivateContentSearch();\n\t// activate confirmations\n\tactivateConfirmations();\n\t// activate tooltips\n\tactivateTooltips();\n\t// activate navbar state\n\tactivateNavbarState();\n\t// activate fancy toggles\n\tactivateToggleCheckboxes();\n\n\t// global Validaiton settings\n\t$.validator.setDefaults( {\n\t\t// apparently, the *default* of jQuery validation is to ignore validation of hidden elements (e.g., when using tabs, validation is skipped)\n\t\t// seriously???\n\t\t// anyway, setting ignore: [] fixes it\n\t\tignore    : [],\n\t\t//errorElement: 'span',\n\t\t//errorClass: 'help-block',\n\t\thighlight : function( element ) {\n\t\t\t$( element ).closest( \".form-group\" ).removeClass( \"success\" ).addClass( \"error\" );\n\t\t},\n\t\tsuccess : function( element ) {\n\t\t\telement\n\t\t\t\t.text( \"Field is valid\" )\n\t\t\t\t.addClass( \"valid\" )\n\t\t\t\t.closest( \".form-group\" ).removeClass( \"error\" ).addClass( \"success\" );\n\t\t\telement.remove();\n\t\t},\n\t\terrorPlacement : function( error, element ) {\n\t\t\tif ( $( element ).is( \":hidden\" ) ) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\terror.appendTo( element.closest( \"div.controls\" ) );\n\t\t\t}\n\t\t}\n\t} );\n\t$.fn.resetValidations = function() {\n\t\tlet form = this[0].currentForm;\n\t\t// also remove success and error classes\n\t\t$( form ).find( \".form-group\" ).each( function() {\n\t\t\t$( this ).removeClass( \"error\" ).removeClass( \"success\" );\n\t\t} );\n\t\t$( form ).find( \":input\" ).each( function() {\n\t\t\t$( this ).removeClass( \"error\" ).removeClass( \"valid\" );\n\t\t} );\n\t\treturn this;\n\t};\n\t// simple method to blank out all form fields\n\t$.fn.clearForm = function() {\n\t\tif ( this.data( \"validator\" ) === undefined ) { return; }\n\t\t// reset classes and what not\n\t\tthis.data( \"validator\" ).resetForm();\n\t\t// run over input fields and blank them out\n\t\tthis.find( \":input\" ).each( function() {\n\t\t\tswitch ( this.type ) {\n\t\t\tcase \"password\":\n\t\t\tcase \"hidden\":\n\t\t\tcase \"select-multiple\":\n\t\t\tcase \"select-one\":\n\t\t\tcase \"text\":\n\t\t\tcase \"textarea\":\n\t\t\t\t$( this ).val( \"\" );\n\t\t\t\tbreak;\n\t\t\tcase \"checkbox\":\n\t\t\tcase \"radio\":\n\t\t\t\tthis.checked = false;\n\t\t\t}\n\t\t} );\n\t\t$( this.data( \"validator\" ) ).resetValidations();\n\t\treturn this;\n\t};\n\t$.fn.collect = function() {\n\t\tlet serializedArrayData = this.serializeArray();\n\t\tlet data = {};\n\t\t$.each( serializedArrayData, function( index, obj ) {\n\t\t\tdata[ obj.name ] = obj.value;\n\t\t} );\n\t\treturn data;\n\t};\n\n\t// flicker messages\n\tlet t = setTimeout( toggleFlickers(), 5000 );\n\n\t// Tab link detector for bootstrap\n\t$( function() {\n\t\tlet activeTab = $( \"[href=\\\"\" + location.hash + \"\\\"]\" );\n\t\tif ( activeTab ) { activeTab.tab( \"show\" ); }\n\t} );\n\n\t// Nav Search Shortcut\n\ttinyKeys( window, {\n\t\t[ \"Control+K\" ] : () => {\n\t\t\t$( \"#nav-search\" ).focus();\n\t\t\treturn false;\n\t\t}\n\t} );\n\n\t// find all links with the key-binding data attribute\n\t$( \"[data-keybinding]\" ).each( function() {\n\t\tlet boundItem = $( this );\n\t\ttinyKeys( window, {\n\t\t\t[ boundItem.data( \"keybinding\" ) ] : () => {\n\t\t\t\t// give precedence to onclick\n\t\t\t\tif ( boundItem.attr( \"onclick\" ) ) {\n\t\t\t\t\t// if onclick, call event\n\t\t\t\t\tboundItem.click();\n\t\t\t\t} else {\n\t\t\t\t\t// otherwise, follow link\n\t\t\t\t\tto( boundItem.attr( \"href\" ) );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t} );\n\n\t// Hide empty menu's due to permissions.\n\t$( \"#main-navbar li.nav-dropdown\" ).each( function() {\n\t\tif ( !$( this ).find( \"ul.nav-sub li\" ).length ) {\n\t\t\t$( this ).hide();\n\t\t}\n\t} );\n\n\t// match stateful accordions\n\t$( \".accordion[data-stateful]\" ).each( function() {\n\t\tlet accordion = $( this ),\n\t\t\tdata = accordion.data( \"stateful\" ),\n\t\t\tmatch;\n\t\tif ( data ) {\n\t\t\t// try to retrieve cookie that matches accordion panel id\n\t\t\tmatch = $.cookie( data );\n\t\t\t// if a match was found...\n\t\t\tif ( match !== null ) {\n\t\t\t\t// wax defaults that are hardcoded on the template\n\t\t\t\taccordion.find( \".collapse\" ).removeClass( \"in\" );\n\t\t\t\t//show the matched group\n\t\t\t\t$( \"#\" + match ).addClass( \"in\" );\n\t\t\t}\n\t\t}\n\t\t// bind listener for state changes\n\t\taccordion.bind( \"shown.bs.collapse\", function() {\n\t\t\t// grab id from expanded accordion panel\n\t\t\tlet active = accordion.find( \".in\" ).attr( \"id\" );\n\t\t\t// set cookie\n\t\t\t$.cookie( data, active );\n\t\t} );\n\t} );\n\n\n} );\n\n/**\n * Activate the main sidebar state to open or closed\n */\nwindow.activateNavbarState = function() {\n\t// Bind listener to left toggle action found in contentbox-admin/layouts/default.cfm\n\t$( \"#toggle-left\" ).on( \"click\", function( e ) {\n\t\t// Verify window size, do not store if in mobile mode\n\t\tif ( $( window ).width() > 768 ) {\n\t\t\t// Are we opened or closed?\n\t\t\tlet isCollapsed = ( $( \"#container\" ).hasClass( \"sidebar-mini\" ) );\n\t\t\t// Call change user editor preference\n\t\t\t$.ajax( {\n\t\t\t\turl   : $( \"body\" ).attr( \"data-preferenceURL\" ),\n\t\t\t\tdata  : { value: isCollapsed, preference: \"sidemenuCollapse\" },\n\t\t\t\tasync : true\n\t\t\t} );\n\t\t}\n\n\t} );\n};\n\n/**\n * Check if the main right sidebar is open or not\n * @return {Boolean} open or not\n */\nwindow.isMainSidebarOpen = function() {\n\tlet sidebar = $( \"#main-content-sidebar\" );\n\treturn ( sidebar.attr( \"id\" ) !== undefined && sidebar.css( \"display\" ) === \"block\" );\n};\n\n/**\n * Toggle the main sidebar to fully display the main slot of content.\n * main-content-slot (col) main-content-sidebar (col)\n */\nwindow.toggleSidebar = function(){\n\tlet sidebar \t\t= $( \"#main-content-sidebar\" );\n\tlet type \t\t\t= sidebar.css( \"display\" );\n\tlet sidebarState \t= false;\n\n\t// nosidebar exit\n\tif ( type === undefined ) { return; }\n\n\t// toggles\n\tif ( type === \"block\" ) {\n\t\tsidebar.fadeOut();\n\t\t$( \"#main-content-sidebar-trigger i\" )\n\t\t\t.removeClass( \"fa-minus-square\" )\n\t\t\t.addClass( \"fa-plus-square\" );\n\t\t$( \"#main-content-slot\" )\n\t\t\t.removeClass( \"col-md-8\" )\n\t\t\t.addClass( \"col-md-12\" );\n\t} else {\n\t\t$( \"#main-content-sidebar-trigger i\" )\n\t\t\t.removeClass( \"fa-plus-square\" )\n\t\t\t.addClass( \"fa-minus-square\" );\n\t\tsidebar.fadeIn();\n\t\t$( \"#main-content-slot\" )\n\t\t\t.removeClass( \"col-md-12\" )\n\t\t\t.addClass( \"col-md-8\" );\n\t\tsidebarState = true;\n\t}\n\n\t// Call change user editor preference\n\t$.ajax( {\n\t\turl  \t: $( \"body\" ).attr( \"data-preferenceURL\" ),\n\t\tdata \t: { value: sidebarState, preference: \"sidebarstate\" },\n\t\tasync\t: true\n\t} );\n};\n\n/**\n * Run an admin action async\n * @param  {string} action    Target action to execute\n * @param  {string} actionURL The posting executor\n */\nwindow.adminAction = function( action, actionURL ) {\n\tif ( action != \"null\" ) {\n\t\t$( \"#adminActionsIcon\" ).addClass( \"fa-spin textOrange\" );\n\t\t// Run Action Dispatch\n\t\t$.post( actionURL, { targetModule: action }, function( data ) {\n\t\t\tif ( data.ERROR ) {\n\t\t\t\tadminNotifier( \"error\", \"<i class='fa-exclamation-sign'></i> <strong>Error running action, check logs!</strong>\" );\n\t\t\t} else {\n\t\t\t\tadminNotifier( \"info\", \"<i class='fa-exclamation-sign'></i> <strong>Action Ran, Booya!</strong>\" );\n\t\t\t}\n\t\t\t$( \"#adminActionsIcon\" ).removeClass( \"fa-spin textOrange\" );\n\t\t} );\n\t}\n};\n\n/**\n * Send an admin notifier popup for a few seconds\n * @param type The type to send: Defaults to warn, available are warning, info, error, success\n * @param message The message to display in the notifier\n * @param delay The delay of the message, defaults to 1500 ms\n */\nwindow.adminNotifier = function( type, message, delay ) {\n\ttoastr.options = {\n\t\t\"closeButton\"       : true,\n\t\t\"preventDuplicates\" : true,\n\t\t\"progressBar\"       : true,\n\t\t\"showDuration\"      : \"300\",\n\t\t\"timeOut\"           : \"2000\",\n\t\t\"positionClass\"     : \"toast-top-center\"\n\t};\n\tswitch ( type ) {\n\tcase \"info\":\n\t{ toastr.info( message ); break; }\n\tcase \"error\":\n\t{ toastr.error( message ); break; }\n\tcase \"success\":\n\t{ toastr.success( message ); break; }\n\tcase \"warning\":\n\t{ toastr.warning( message ); break; }\n\tdefault:\n\t{\n\t\ttoastr.info( message );\n\t\tbreak;\n\t}\n\t}\n\n};\n\nwindow.activateContentSearch = function() {\n\t// local refs\n\tlet $nav_search = $( \"#nav-search\" );\n\tlet $nav_search_results = $( \"#div-search-results\" );\n\t// opacity\n\t$nav_search.css( \"opacity\", \"0.8\" );\n\t// focus effects\n\t$nav_search.focusin( function() {\n\t\t//if( $nav_search.is( \":focus\" ) ){ return; }\n\t\t$( this ).animate( { opacity: 1.0 },\n\t\t\t500,\n\t\t\tfunction() {}\n\t\t);\n\t} ).blur( function() {\n\t\t$( this ).animate( { opacity: 0.50 },\n\t\t\t500,\n\t\t\tfunction() {}\n\t\t);\n\t} );\n\t// keyup quick search\n\t$nav_search.keyup(\n\t\t_.debounce(\n\t\t\tfunction() {\n\t\t\t\tlet $this = $( this );\n\t\t\t\t// Only send requests if more than 2 characters\n\t\t\t\tif ( $this.val().length > 1 ) {\n\t\t\t\t\t$nav_search_results.load(\n\t\t\t\t\t\t$( \"#nav-search-url\" ).val(), { search: $this.val() },\n\t\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\t\tif ( $nav_search_results.css( \"display\" ) === \"none\" ) {\n\t\t\t\t\t\t\t\t$nav_search_results.fadeIn().slideDown();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\t300\n\t\t)\n\t);\n\t// add click listener to body to hide quick search panel\n\t$( \"body\" ).click( function( e ) {\n\t\tlet target = $( e.target ),\n\t\t\tipTarget = target.closest( \"#div-search\" );\n\t\t// if click occurs within visible element, add to ignore list\n\t\tif ( !ipTarget.length ) {\n\t\t\t//run global hide methods\n\t\t\tcloseSearchBox();\n\t\t}\n\t} );\n};\n\nwindow.closeSearchBox = function() {\n\t$( \"#div-search-results\" ).slideUp();\n\t$( \"#nav-search\" ).val( \"\" );\n};\n\nwindow.quickLinks = function( inURL ) {\n\tif ( inURL != \"null\" ) {\n\t\twindow.location = inURL;\n\t}\n};\n\nwindow.activateTooltips = function() {\n\t//Tooltip\n\t$( \"[title]\" ).tooltip( toolTipSettings );\n};\n\nwindow.hideAllTooltips = function(){\n\t$( \".tooltip\" ).hide();\n};\n\nwindow.toggleFlickers = function(){\n\t$( \".flickerMessages\" ).slideToggle();\n\t$( \".flickers\" ).fadeOut( 3000 );\n};\n\n/**\n * Close the remote loaded modal\n */\nwindow.closeRemoteModal = function() {\n\t$remoteModal.modal( \"hide\" );\n};\n\n/**\n * Reset a modal form according to the passed container\n * @param  {object} container The container\n */\nwindow.resetContainerForms = function( container ) {\n\t// Clears a form in the div element, usually to reset forms in dialogs.\n\tlet frm = container.find( \"form\" );\n\tif ( frm.length ) {\n\t\t$( frm[0] ).clearForm();\n\t}\n};\n\n/**\n * Close a local modal window\n * @param div The jquery div object that represents the dialog.\n */\nwindow.closeModal = function( div ) {\n\tdiv.modal( \"hide\" );\n};\n\n/**\n * Open a new local modal window based on a div container\n * @param div The jquery object of the div to extract the HTML from.\n * @param w The width of the modal\n * @param h The height of the modal\n */\nwindow.openModal = function( div, w, h ) {\n\t// Open the modal\n\tdiv.modal();\n\t// attach a listener to clear form when modal closes\n\t$( div ).on( \"hidden.bs.modal\", function() {\n\t\tresetContainerForms( $( this ) );\n\t} );\n};\n\n/**\n * Open a new remote modal window Ajax style.\n * @param url The URL ajax destination\n * @param data The data packet to send\n * @param w The width of the modal\n * @param h The height of the modal\n * @param delay Whether or not to delay loading of dialog until after dialog is created (useful for iframes)\n * @return\n */\nwindow.openRemoteModal = function( url, params, w, h, delay ) {\n\t// if no URL, set warning and exit\n\tif ( !url ) {\n\t\tconsole.log( \"URL needed\" );\n\t\treturn;\n\t}\n\tlet modal = $remoteModal;\n\tlet maxHeight = ( $( window ).height() - 200 );\n\tlet maxWidth = ( $( window ).width() * 0.85 );\n\n\t// Set default values for modal data elements\n\tmodal.data( \"url\", url );\n\tmodal.data( \"params\", params );\n\tmodal.data( \"width\", w !== undefined ? w : maxWidth );\n\tmodal.data( \"height\", h !== undefined ? h : maxHeight );\n\n\t// convert height percentage to a numeric value\n\tlet height = modal.data( \"height\" );\n\tif ( height.search && height.search( \"%\" ) !== -1 ) {\n\t\theight = height.replace( \"%\", \"\" ) / 100.00;\n\t\theight = $( window ).height() * height;\n\t}\n\t// Check max heights conditions\n\tif ( height > maxHeight ) {\n\t\theight = maxHeight;\n\t}\n\tmodal.data( \"height\", height );\n\n\t// in delay mode, we'll create a modal and then load the data (seems to be necessary for iframes to load correctly)\n\tif ( delay ) {\n\t\tmodal.data( \"delay\", true );\n\t\tmodal.modal();\n\t}\n\t// otherwise, front-load the request and then create modal\n\telse {\n\t\t// load request for content modal\n\t\tmodal.load( url, params, function() {\n\t\t\t// Show modal, once content has being retrieved\n\t\t\tmodal.modal();\n\t\t} );\n\t}\n\treturn true;\n};\n\n/**\n * Resize the modal content preview window\n * @param {object} activeBtn The active button object\n * @param {numeric} w The width to use in pixels\n */\nwindow.setPreviewSize = function( activeBtn, w ) {\n\tlet modalDialog = $remoteModal.find( \".modal-dialog\" ),\n\t\tframe = $( \"#previewFrame\" ).length ? $( \"#previewFrame\" ) : modalDialog,\n\t\torig = { \"width\": $remoteModal.data( \"width\" ) },\n\t\tmodalSize = { \"width\": w };\n\n\t// width is bigger than original size, reset to original\n\tif ( !w || modalSize.width > orig.width ) {\n\t\tmodalSize = { \"width\": orig.width };\n\t}\n\n\t// toggle \"Quick Preview\" on Mobile Views\n\t$remoteModal.find( \".header-title\" ).toggle( modalSize.width > 600 );\n\t// Set current active buttons\n\t$( activeBtn ).siblings( \".btn-primary\" ).removeClass( \"btn-primary\" ).addClass( \"btn-info\" );\n\t$( activeBtn ).removeClass( \"btn-info\" ).addClass( \"btn-primary\" );\n\n\t// resize it now.\n\tmodalDialog.animate( modalSize, 500 );\n};\n\n/**\n * Attach modal listeners to global modals: Remote and ConfirmIt\n */\nwindow.attachModalListeners = function() {\n\t// Remote show event: Usually we resize the window here.\n\t$remoteModal.on( \"show.bs.modal\", function() {\n\t\tlet modal = $remoteModal;\n\t\tmodal.find( \".modal-dialog\" ).css( {\n\t\t\twidth  : modal.data( \"width\" ),\n\t\t\theight : modal.data( \"height\" )\n\t\t} );\n\t} );\n\t// Remote shown event: Delayed loading of content\n\t$remoteModal.on( \"shown.bs.modal\", function() {\n\t\tlet modal = $remoteModal;\n\t\t// only run if modal is in delayed mode\n\t\tif ( modal.data( \"delay\" ) ) {\n\t\t\tmodal.load( modal.data( \"url\" ), modal.data( \"params\" ), function() {\n\t\t\t\tmodal.find( \".modal-dialog\" ).css( {\n\t\t\t\t\twidth  : modal.data( \"width\" ),\n\t\t\t\t\theight : modal.data( \"height\" )\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t} );\n\t// Remote hidden event: Reset loader\n\t$remoteModal.on( \"hidden.bs.modal\", function() {\n\t\tlet modal = $remoteModal;\n\t\t// reset modal html\n\t\tmodal.html( \"<div class=\\\"modal-header\\\"><h3>Loading...</h3></div><div class=\\\"modal-body\\\" id=\\\"removeModelContent\\\"><i class=\\\"fa fa-spinner fa-spin fa-lg fa-4x\\\"></i></div>\" );\n\t\t// reset container forms\n\t\tresetContainerForms( modal );\n\t} );\n};\n\n/**\n * Activate fancy toggle checkboxes\n */\nwindow.activateToggleCheckboxes = function() {\n\t// toggle checkboxes\n\t$( \"input[data-toggle=\\\"toggle\\\"]\" ).change( function() {\n\t\tlet inputMatch = $( this ).data( \"match\" );\n\t\t$( \"#\" + inputMatch ).val( $( this ).prop( \"checked\" ) );\n\t\t//console.log( $( this ).prop( 'checked' ) + \" input match :\" + inputMatch );\n\t} );\n};\n\n/**\n * Close confirmation modal\n */\nwindow.closeConfirmations = function() {\n\t$confirmIt.modal( \"hide\" );\n};\n\n/**\n * Activate modal confirmation windows\n */\nwindow.activateConfirmations = function() {\n\t// close button triggers for confirmation dialog\n\t$confirmIt.find( \"button\" ).on( \"click\", function( e ) {\n\t\tif ( $( this ).attr( \"data-action\" ) === \"confirm\" ) {\n\t\t\t$confirmIt.find( \"#confirmItButtons\" ).hide();\n\t\t\t$confirmIt.find( \"#confirmItLoader\" ).fadeIn();\n\t\t\twindow.location = $confirmIt.data( \"confirmSrc\" );\n\t\t}\n\t} );\n\n\t// Activate dynamic confirmations from <a> of class confirmIt\n\t$( \".confirmIt\" ).click( function( e ) {\n\t\t// Enable button\n\t\t$confirmIt.find( \"#confirmItButtons\" ).fadeIn();\n\t\t$confirmIt.find( \"#confirmItLoader\" ).hide();\n\t\t// setup the href\n\t\t$confirmIt.data( \"confirmSrc\", $( this ).attr( \"href\" ) );\n\t\t// defaults\n\t\tlet dataMessage = $( this ).attr( \"data-message\" ) ? $( this ).attr( \"data-message\" ) : \"Are you sure you want to perform this action?\";\n\t\tlet dataTitle = $( this ).attr( \"data-title\" ) ? $( this ).attr( \"data-title\" ) : \"Are you sure?\";\n\t\t// set message\n\t\t$confirmIt.find( \"#confirmItMessage\" ).html( dataMessage );\n\t\t// set title\n\t\t$confirmIt.find( \"#confirmItTitle\" ).html( dataTitle );\n\t\t// show the confirmation when clicked\n\t\t$confirmIt.modal();\n\t\t// prevent default action\n\t\te.preventDefault();\n\t} );\n};\n\nwindow.popup = function( url, w, h )  {\n\tlet winWidth = 1000;\n\tlet winHeight = 750;\n\tif ( w ) { winWidth = w; }\n\tif ( h ) { winHeight = h; }\n\tlet xPosition = ( screen.width / 2 ) - ( winWidth / 2 );\n\tlet yPosition = ( screen.height / 2 ) - ( winHeight / 2 );\n\twindow.open(\n\t\turl,\n\t\t\"layoutPreview\",\n\t\t\"resizable=yes,status=yes,location=no,menubar=no,toolbar=no,scrollbars=yes,width=\" + winWidth + \",height=\" + winHeight + \",left=\" + xPosition + \",top=\" + yPosition + \",screenX=\" + xPosition + \",screenY=\" + yPosition\n\t);\n};\n\n/**\n * Relocation shorcuts\n * @param link\n * @returns {Boolean}\n */\nwindow.to = function( link ) {\n\twindow.location = link;\n\treturn false;\n};\n\n/**\n * Check all checkboxes utility function\n * @param checked\n * @param id\n */\nwindow.checkAll = function( checked, id ) {\n\t$( \"input[name='\" + id + \"']\" ).each( function() {\n\t\tthis.checked = checked;\n\t} );\n};\n\n/**\n * Check all checkboxes by value\n * @param id\n * @param recordID\n * @returns\n */\nwindow.checkByValue = function( id, recordID ) {\n\t$( \"input[name='\" + id + \"']\" ).each( function() {\n\t\tif ( this.value === recordID ) { this.checked = true; } else { this.checked = false; }\n\t} );\n};\n\n/**\n * Get today's date in us or rest of the world format\n *\n * @param {boolean} us defaults to true\n */\nwindow.getToday = function( us ) {\n\t// default us to true\n\tus = ( us == null ? true : us );\n\tif ( us ) {\n\t\treturn DateTime.now().toFormat( \"yyyy-LL-dd\" );\n\t} else {\n\t\treturn DateTime.now().toFormat( \"dd-MM-yyyy\" );\n\t}\n};\n\n/**\n * Import Content Dialog Forms.\n * This function takes care of opening a generic configured import dialog and setup all\n * the events to submit it.\n */\nwindow.importContent = function(){\n\t// local id's\n\tlet $importForm = $( \"#importForm\" );\n\tlet $importDialog = $( \"#importDialog\" );\n\n\t// open modal for cloning options\n\topenModal( $importDialog, 500, 350 );\n\n\t// form validator button bar loader\n\t$importForm.validate( {\n\t\tsubmitHandler : function( form ){\n\t\t\t$importForm.find( \"#importButtonBar\" ).slideUp();\n\t\t\t$importForm.find( \"#importBarLoader\" ).slideDown();\n\t\t\tform.submit();\n\t\t}\n\t} );\n\n\t// close button\n\t$importForm.find( \"#closeButton\" ).click( function( e ){\n\t\tcloseModal( $importDialog );\n\t\treturn false;\n\t} );\n\n\t// clone button\n\t$importForm.find( \"#importButton\" ).click( function( e ){\n\t\t$importForm.submit();\n\t} );\n};\n\n/**\n * Toggle More info panels\n */\nwindow.toggleMoreInfoPanel = function( contentId ){\n\t$( \"#moreInfo-\" + contentId ).toggleClass( \"hidden\" );\n\t$( \"#moreInfoOpenButton-\" + contentId ).toggleClass( \"hidden\" );\n\t$( \"#moreInfoCloseButton-\" + contentId ).toggleClass( \"hidden\" );\n};\n\n/**\n * Password meter event closure used to monitor password changes for the meter rules to activate.\n * This expects the following ID's to be in DOM: pw_rule_lower, upper, digit, symbol and count.\n * It also expects the passwordRules element to contain the min length data element\n */\nwindow.passwordMeter = function( event ) {\n\tlet value = $( this ).val();\n\t//console.log( value );\n\n\t// Counter bind\n\t$( \"#pw_rule_count\" ).html( value.length );\n\tlet minLength = $( \"#passwordRules\" ).data( \"min-length\" );\n\n\t// Rule Checks\n\tlet rules = {\n\t\tlower   : REGEX_LOWER.test( value ),\n\t\tupper   : REGEX_UPPER.test( value ),\n\t\tdigit   : REGEX_DIGIT.test( value ),\n\t\tspecial : REGEX_SPECIAL.test( value )\n\t};\n\n\t// Counter\n\tif ( value.length >= minLength ) {\n\t\t$( \"#pw_rule_count\" ).addClass( \"badge-success\" );\n\t} else {\n\t\t$( \"#pw_rule_count\" ).removeClass( \"badge-success\" );\n\t}\n\n\t// Iterate and test rules\n\tfor ( let key in rules ) {\n\t\tif ( rules[key] ) {\n\t\t\t$( \"#pw_rule_\" + key ).addClass( \"badge-success\" );\n\t\t} else {\n\t\t\t$( \"#pw_rule_\" + key ).removeClass( \"badge-success\" );\n\t\t}\n\t}\n};\n\n/**\n * Used by our form validator to validate password fields according to default rules\n * @param  {any} value The password value\n * @return {boolean} Password validates via our rules\n */\nwindow.passwordValidator = function( value ) {\n\tlet minLength = $( \"#passwordRules\" ).data( \"min-length\" );\n\n\tlet lower = REGEX_LOWER.test( value ),\n\t\tupper = REGEX_UPPER.test( value ),\n\t\tdigit = REGEX_DIGIT.test( value ),\n\t\tdigits = REGEX_DIGITS.test( value ),\n\t\tspecial = REGEX_SPECIAL.test( value );\n\n\treturn lower // has a lowercase letter\n        &&\n        upper // has an uppercase letter\n        &&\n        digit // has at least one digit\n        &&\n        special // has special chars\n        &&\n        value.length >= minLength; // at least characters\n};\n\n/**\n * Convert an iso8601 to local browser date time\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleString\n *\n * @param {*} dateTime The iso8601 date time object\n * @returns A local browser date time\n */\nwindow.toLocalString = function( dateTime, options ){\n\treturn new Date( dateTime ).toLocaleString( undefined, options || getDefaultDateTimeOptions() );\n};\n\n/**\n * Convert an iso8601 to local browser date object\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString\n *\n * @param {*} dateTime The iso8601 date time object\n * @returns A local browser date time\n */\nwindow.toLocaleDateString = function( dateTime, options ){\n\treturn new Date( dateTime ).toLocaleDateString( undefined, options || getDefaultDateTimeOptions() );\n};\n\n/**\n * Convert an iso8601 to local browser time object\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString\n *\n * @param {*} dateTime The iso8601 date time object\n * @returns A local browser date time\n */\nwindow.toLocaleTimeString = function( dateTime, options ){\n\treturn new Date( dateTime ).toLocaleTimeString( undefined, options || getDefaultDateTimeOptions() );\n};\n\nwindow.getDefaultDateTimeOptions = function(){\n\treturn { dateStyle: \"medium\", timeStyle: \"long\" };\n};\n\n/**\n * Scroll to a specific id hash\n * @param {*} hashName\n */\nwindow.scrollToHash = function( hashName ) {\n\tlocation.hash = \"#\" + hashName;\n};\n\n/**\n * Build an admin URL for ajax calls\n * @param {string} uri The uri to append to the admin url\n * @returns {string} The complete admin url\n */\nwindow.adminLink = function( uri ) {\n\tlet link = $( \"body\" ).attr( \"data-adminURL\" );\n\treturn uri == undefined ? link : link + \"/\" + uri;\n};\n","const contentListHelper = ( () => {\n\n\tconst JSON_HEADER = { \"Content-type\": \"application/json;charset=UTF-8\" };\n\n\t// Properties\n\tvar $adminEntryPoint = \"\";\n\tvar $tableContainer  = \"\";\n\tvar $tableURL\t\t = \"\";\n\tvar $searchField \t = \"\";\n\tvar $searchName\t\t = \"\";\n\tvar $contentForm\t = \"\";\n\tvar $bulkStatusURL   = \"\";\n\tvar $cloneDialog\t = \"\";\n\tvar $parentID \t\t = \"\";\n\tvar $isSearching     = false;\n\n\t/**\n\t * Load content into the setup properties. We define it here, so the references can be compiled on the returned exposed functions\n\t *\n\t * @param {*} criteria Object literal of filtering options: search, page, parent, fAuthors, fCreators, fCatetories, fStatus, showAll\n\t */\n\tvar contentLoad = ( criteria ) => {\n\t\t// default checks\n\t\tif ( criteria == undefined ){ criteria = {}; }\n\t\t// default criteria matches\n\t\tif ( !( \"search\" in criteria ) ){ criteria.search = \"\"; }\n\t\tif ( !( \"page\" in criteria ) ){ criteria.page = 1; }\n\t\tif ( !( \"parent\" in criteria ) ){ criteria.parent = \"\"; }\n\t\tif ( !( \"fAuthors\" in criteria ) ){ criteria.fAuthors = \"all\"; }\n\t\tif ( !( \"fCreators\" in criteria ) ){ criteria.fCreators = \"all\"; }\n\t\tif ( !( \"fCategories\" in criteria ) ){ criteria.fCategories = \"all\"; }\n\t\tif ( !( \"fStatus\" in criteria ) ){ criteria.fStatus = \"any\"; }\n\t\tif ( !( \"showAll\" in criteria ) ){ criteria.showAll = false; }\n\n\t\t// loading effect\n\t\t$tableContainer.css( \"opacity\", .60 );\n\t\tvar args = {\n\t\t\tpage     \t\t\t: criteria.page,\n\t\t\tparent   \t\t\t: criteria.parent,\n\t\t\tfAuthors  \t\t: criteria.fAuthors,\n\t\t\tfCategories\t: criteria.fCategories,\n\t\t\tfStatus   \t\t: criteria.fStatus,\n\t\t\tshowAll   \t\t: criteria.showAll,\n\t\t\tfCreators \t\t: criteria.fCreators,\n\t\t};\n\t\t// Add dynamic search key name\n\t\targs[ $searchName ] = criteria.search;\n\t\t// load content\n\t\t$isSearching=true;\n\t\t$tableContainer.load( $tableURL, args, function(){\n\t\t\t$isSearching=false;\n\t\t\t$tableContainer.css( \"opacity\", 1 );\n\t\t\t$( this ).fadeIn( \"fast\" );\n\t\t} );\n\t};\n\n\t/**\n\t * Applies filters and loads the content\n\t */\n\tvar contentFilter = () => {\n\t\tif ( $( \"#fAuthors\" ).val() != \"all\" ||\n\t\t\t$( \"#fCreators\" ).val() != \"all\" ||\n\t\t\t$( \"#fCategories\" ).val() != \"all\" ||\n\t\t\t$( \"#fStatus\" ).val() != \"any\" ) {\n\t\t\t$( \"#filterBox\" ).addClass( \"selected\" );\n\t\t}\n\t\telse {\n\t\t\t$( \"#filterBox\" ).removeClass( \"selected\" );\n\t\t}\n\t\tcontentLoad( {\n\t\t\tfAuthors    : $( \"#fAuthors\" ).val(),\n\t\t\tfCategories : $( \"#fCategories\" ).val(),\n\t\t\tfStatus     : $( \"#fStatus\" ).val(),\n\t\t\tfCreators   : $( \"#fCreators\" ).val()\n\t\t} );\n\t};\n\n\t// reset filters\n\tvar resetFilter = ( reload ) => {\n\t\t// reload check\n\t\tif ( reload ){\n\t\t\tcontentLoad();\n\t\t}\n\t\t// reload filters\n\t\t$( \"#filterBox\" ).removeClass( \"selected\" );\n\t\t$( \"#fAuthors\" ).val( \"all\" );\n\t\t$( \"#fCategories\" ).val( \"all\" );\n\t\t$( \"#fStatus\" ).val( \"any\" );\n\t\t$( \"#fCreators\" ).val( \"all\" );\n\t};\n\n\t// Return our encapsulated module\n\treturn {\n\n\t\t// Setup the content view with the settings object\n\t\tinit : ( settings ) => {\n\t\t\t// setup model properties\n\t\t\t$adminEntryPoint = settings.adminEntryPoint;\n\t\t\t$tableContainer = settings.tableContainer;\n\t\t\t$tableURL\t\t= settings.tableURL;\n\t\t\t$searchField \t= settings.searchField;\n\t\t\t$searchName\t\t= settings.searchName;\n\t\t\t$contentForm\t= settings.contentForm;\n\t\t\t$bulkStatusURL  = settings.bulkStatusURL;\n\t\t\t$cloneDialog\t= settings.cloneDialog;\n\t\t\t$parentID \t\t= settings.parentID;\n\t\t\t$isSearching    = false;\n\n\t\t\t// Create history Listener\n\t\t\tHistory.Adapter.bind( window, \"statechange\", function(){\n\t\t\t\tcontentLoad( { parent: History.getState().data.parent } );\n\t\t\t} );\n\n\t\t\t// quick search binding\n\t\t\t$searchField.keyup(\n\t\t\t\t_.debounce(\n\t\t\t\t\tfunction(){\n\t\t\t\t\t\tif ( !$isSearching ){\n\t\t\t\t\t\t\tcontentLoad( { search: $( this ).val() } );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t300\n\t\t\t\t)\n\t\t\t);\n\n\t\t\t// load content on startup, using default parents if passed.\n\t\t\tif ( $parentID.length ){\n\t\t\t\t// Load initial data\n\t\t\t\tcontentLoad( { parent: $parentID } );\n\t\t\t} else {\n\t\t\t\tcontentLoad( {} );\n\t\t\t}\n\t\t},\n\n\t\tcontentLoad  \t: contentLoad,\n\t\tcontentFilter\t: contentFilter,\n\t\tresetFilter  \t: resetFilter,\n\n\t\t// Content drill down\n\t\tcontentDrilldown : ( parent ) => {\n\t\t\tresetFilter();\n\t\t\tif ( parent == undefined ){ parent = \"\"; }\n\t\t\t$searchField.val( \"\" );\n\t\t\t// push history\n\t\t\tHistory.pushState( { parent: parent }, document.title, \"?parent=\" + parent );\n\t\t\t// Scroll back up\n\t\t\tscrollToHash( \"container\" );\n\t\t},\n\n\t\t// show all content\n\t\tcontentShowAll : () => {\n\t\t\tresetFilter();\n\t\t\tcontentLoad ( { showAll: true } );\n\t\t},\n\n\t\t// content paginate\n\t\tcontentPaginate : ( page ) => {\n\t\t\t// paginate with kept searches and filters.\n\t\t\tcontentLoad( {\n\t\t\t\tsearch      : $searchField.val(),\n\t\t\t\tpage        : page,\n\t\t\t\tparent      : History.getState().data.parent || $parentID,\n\t\t\t\tfAuthors    : $( \"#fAuthors\" ).val(),\n\t\t\t\tfCategories : $( \"#fCategories\" ).val(),\n\t\t\t\tfStatus     : $( \"#fStatus\" ).val(),\n\t\t\t\tfCreators   : $( \"#fCreators\" ).val()\n\t\t\t} );\n\t\t},\n\n\t\t// Get info panel contents\n\t\tgetInfoPanelContent : ( contentID ) => {\n\t\t\treturn $( \"#infoPanel_\" + contentID ).html();\n\t\t},\n\n\t\t// Activate info panels\n\t\tactivateInfoPanels : () => {\n\t\t\t$( \".popovers\" ).popover( {\n\t\t\t\thtml    : true,\n\t\t\t\tcontent : function(){\n\t\t\t\t\treturn getInfoPanelContent( $( this ).attr( \"data-contentID\" ) );\n\t\t\t\t},\n\t\t\t\ttrigger   : \"hover\",\n\t\t\t\tplacement : \"left\",\n\t\t\t\ttitle     : \"<i class=\\\"fa fa-info-circle\\\"></i> Quick Info\",\n\t\t\t\tdelay     : { show: 200, hide: 500 }\n\t\t\t} );\n\t\t},\n\n\t\t// Activate quick looks\n\t\tactivateQuickLook : ( $table, quickLookURL ) => {\n\t\t\t$table.find( \"tr\" ).bind( \"contextmenu\",function( e ) {\n\t\t\t\tif ( e.which === 3 ) {\n\t\t\t\t\tif ( $( this ).attr( \"data-contentID\" ) != null ) {\n\t\t\t\t\t\topenRemoteModal( quickLookURL + $( this ).attr( \"data-contentID\" ) );\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\t// Remove content\n\t\tremove : ( contentID, id ) => {\n\t\t\tid = typeof id !== \"undefined\" ? id : \"contentID\";\n\t\t\tcheckAll( false, id );\n\t\t\tif ( contentID != null ){\n\t\t\t\t$( \"#delete_\"+ contentID ).removeClass( \"fa fa-minus-circle\" ).addClass( \"fa fa-spinner fa-spin\" );\n\t\t\t\tcheckByValue( id, contentID );\n\t\t\t}\n\t\t\t$contentForm.submit();\n\t\t},\n\n\t\t// Bulk Remove\n\t\tbulkRemove : () => {\n\t\t\t$contentForm.submit();\n\t\t},\n\n\t\texportSelected : ( exportEvent ) => {\n\t\t\tvar selected = [];\n\t\t\t$( \"#contentID:checked\" ).each( function(){\n\t\t\t\tselected.push( $( this ).val() );\n\t\t\t} );\n\t\t\tif ( selected.length ){\n\t\t\t\tcheckAll( false, \"contentID\" );\n\t\t\t\twindow.open( exportEvent + \"/contentID/\" + selected );\n\t\t\t} else {\n\t\t\t\talert( \"Please select something to export!\" );\n\t\t\t}\n\t\t},\n\n\t\t// Bulk change status\n\t\tbulkChangeStatus : ( status, contentID ) => {\n\t\t\t// Setup the right form actions and status\n\t\t\t$contentForm.attr( \"action\", $bulkStatusURL );\n\t\t\t$contentForm.find( \"#contentStatus\" ).val( status );\n\t\t\t// only submit if something selected\n\t\t\tif ( contentID != null ){\n\t\t\t\t$( \"#status_\"+ recordID ).removeClass( \"fa fa-minus-circle\" ).addClass( \"fa fa-spinner fa-spin\" );\n\t\t\t\tcheckByValue( \"contentID\", contentID );\n\t\t\t}\n\t\t\t$contentForm.submit();\n\t\t},\n\n\t\t// Clone Dialog\n\t\topenCloneDialog : ( contentID, title ) => {\n\t\t\t// local id's\n\t\t\tvar $cloneForm = $cloneDialog.find( \"#cloneForm\" );\n\t\t\t// open modal for cloning options\n\t\t\topenModal( $cloneDialog, 500 );\n\t\t\t// form validator and data\n\t\t\t$cloneForm.validate( {\n\t\t\t\tsubmitHandler : function( form ){\n\t\t\t\t\t$cloneDialog.find( \"#cloneButtonBar\" ).slideUp();\n\t\t\t\t\t$cloneDialog.find( \"#clonerBarLoader\" ).slideDown();\n\t\t\t\t\tform.submit();\n\t\t\t\t}\n\t\t\t} );\n\t\t\t// Setup title and content id.\n\t\t\t$cloneForm.find( \"#contentID\" ).val( contentID );\n\t\t\t$cloneForm.find( \"#title\" ).val( title ).focus();\n\t\t\t// clone button actions\n\t\t\t$cloneDialog.find( \"#cloneButton\" ).click( function( e ){\n\t\t\t\t$cloneForm.submit();\n\t\t\t} );\n\n\t\t},\n\n\t\t/**\n\t\t * Reset the hits on a sepcific content object\n\t\t *\n\t\t * @param {*} contentID The content id to reset the hits on\n\t\t */\n\t\tresetHits : ( contentID ) => {\n\t\t\t// if no length, exit out\n\t\t\tif ( !contentID.length ){ return; }\n\n\t\t\tfetch( $adminEntryPoint + \"/content/resetHits\", {\n\t\t\t\tmethod \t: \"POST\",\n\t\t\t\theaders : JSON_HEADER,\n\t\t\t\tbody   \t: JSON.stringify( { contentID: contentID } )\n\t\t\t} )\n\t\t\t\t.then( response => response.json() )\n\t\t\t\t.then( data => {\n\t\t\t\t\tif ( !data.error ){\n\t\t\t\t\t\tadminNotifier( \"info\", data.messages.join( \"<br>\" ), 3000 );\n\t\t\t\t\t\tcontentFilter();\n\t\t\t\t\t} else {\n\t\t\t\t\t\talert( \"Error Reseting Hits: \" + data.messages.join( \",\" ) );\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t\t.catch( error => {\n\t\t\t\t\talert( \"Error Reseting Hits: \" + error );\n\t\t\t\t} )\n\t\t\t;\n\t\t},\n\n\t\t/**\n\t\t * Reset the hits for multiple selected content objects\n\t\t */\n\t\tresetBulkHits : () => {\n\t\t\tvar selected = [];\n\t\t\t$( \"#contentID:checked\" ).each( function(){\n\t\t\t\tselected.push( $( this ).val() );\n\t\t\t} );\n\t\t\tif ( selected.length ){\n\t\t\t\tresetHits( selected.join( \",\" ) );\n\t\t\t}\n\t\t}\n\t};\n\n} )();\n\nexport default contentListHelper;\n","/**\n * Auto save functionality\n * @param  {object} editor   The editor reference\n * @param  {string} pageID   The content object id\n * @param  {string} ddMenuID The menu ID\n * @param  {object} options  The override options such as: storeMax, timeout\n * @return {object}          Returns the auto save closure\n */\nimport { decompressFromUTF16, compressToUTF16 } from \"lz-string\";\nimport { DateTime } from \"luxon\";\n\nconst autoSavePrefix = \"autosave_\";\n\nwindow.resetAutoSave = function(){\n\tif ( !Modernizr.localstorage ) return;\n\tlet saveStoreKey \t= autoSavePrefix + window.location;\n\tlet saved = localStorage.getItem( saveStoreKey );\n\tif ( saved ){\n\t\tJSON.parse( saved )\n\t\t\t.forEach( ( entry, index ) => {\n\t\t\t\tlocalStorage.removeItem( entry );\n\t\t\t} );\n\t\tlocalStorage.setItem( saveStoreKey, \"[]\" );\n\t}\n\n};\n\nwindow.autoSave = function( editor, pageID, ddMenuID, options ){\n\t// Verify local storage, else disable feature\n\tif ( !Modernizr.localstorage ){\n\t\t$( \"#\" + ddMenuID ).find( \".autoSaveBtn\" )\n\t\t\t.html( \"Auto Save Unavailable\" )\n\t\t\t.addClass( \"disabled\" );\n\t\treturn false;\n\t}\n\n\t// Setup defaults and global options\n\tlet defaults \t\t= { storeMax: 10, timeout: 4000 };\n\tlet opts \t\t\t= $.extend( {}, defaults, options || {} );\n\tlet editorID \t\t= editor.attr( \"id\" );\n\t// Retrieve the actual editor driver implementation using ContentBox JS Interface Method\n\tlet saveStoreKey \t= autoSavePrefix + window.location;\n\tlet timer \t\t\t= 0, savingActive = false;\n\n\t// Setup SavesStore\n\tif ( !localStorage.getItem( saveStoreKey ) ){\n\t\tlocalStorage.setItem( saveStoreKey, \"[]\" );\n\t}\n\tlet saveStore = JSON.parse( localStorage.getItem( saveStoreKey ) );\n\n\t/**\n\t * Remove old saves\n\t * @param  {Function} callback The callback function\n\t */\n\tlet removeOldSaves = function( callback ){\n\t\tlet overMax = saveStore.length - opts.storeMax;\n\t\tfor ( let i = 0; i < overMax; i++ ){\n\t\t  localStorage.removeItem( saveStore[ i ] );\n\t\t  saveStore.splice( i, 1 );\n\t\t}\n\t\tif ( callback ){\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Add to saved storage\n\t * @param {string} saveKey The save storage key\n\t */\n\tlet addToStore = function( saveKey ){\n\t\tsaveStore.push( saveKey );\n\t\tif ( saveStore.length > opts.storeMax ){\n\t\t  removeOldSaves( updateAutoSaveMenu );\n\t\t} else {\n\t\t  updateAutoSaveMenu();\n\t\t}\n\t};\n\n\t/**\n\t * Update auto save dropdown menu\n\t */\n\tlet updateAutoSaveMenu = function(){\n\t\tlocalStorage.setItem( saveStoreKey, JSON.stringify( saveStore ) );\n\t\tlet ulList = \"\";\n\t\tfor ( let i = saveStore.length; i--; ){\n\t\t\tlet newItemDate = DateTime.fromFormat( saveStore[ i ].replace( editorID + \"_\", \"\" ), \"t\" );\n\t\t\tlet dateTitle = newItemDate.diffNow( \"hours\" ).hours < 1 ? newItemDate.toRelative() : newItemDate.toFormat( \"MM/dd/yyyy h:mm a\" );\n\t\t\tulList += \"<li><a href=\\\"javascript:void(0)\\\" data-id=\\\"\" + saveStore[ i ] + \"\\\">\" + dateTitle +\"</a></li>\";\n\t\t}\n\n\t\t// No records\n\t\tif ( !saveStore.length ){\n\t\t\tulList = \"<li><a href=\\\"javascript:void(0)\\\">No Autosaves, type something :)</a></li>\";\n\t\t}\n\n\t\t// Add records\n\t\t$( \"#\" + ddMenuID ).find( \".autoSaveMenu\" ).html( ulList );\n\t};\n\n\t/**\n\t * Start the autosave timer\n\t * @param  {object} event The JS event object\n\t */\n\tlet startTimer = function( event ){\n\t  \tif ( timer ){ clearTimeout( timer ); }\n\t  \ttimer = setTimeout( onTimer, opts.timeout, event );\n\t};\n\n\t/**\n\t * Autosave Command\n\t * @param  {object} event The JS event object\n\t */\n\tlet onTimer = function( event ){\n\t\tif ( savingActive ) {\n\t\t  startTimer( event );\n\t\t} else {\n\t\t\tsavingActive = true;\n\t\t\tlet autoSaveKey = editorID + \"_\" + Date.now();\n\t\t\t// Store it\n\t\t\tlocalStorage.setItem( autoSaveKey, compressToUTF16( getEditorContent() ) );\n\t\t\t// Add to items\n\t\t\taddToStore( autoSaveKey );\n\t\t\t// mark as done\n\t\t\tsavingActive = false;\n\t\t}\n\t};\n\n\t/**\n\t * Load content back into editor\n\t * @param  {string} contentID The content ID to load from local storage\n\t */\n\tlet loadContent = function( contentID ){\n\t\tlet content = localStorage.getItem( contentID );\n\t\tsetEditorContent( \"content\", decompressFromUTF16( content ) );\n\t\tif ( timer ){ clearTimeout( timer ); }\n\t};\n\n\t// Register change event for auto saving\n\tgetContentEditor().on( \"change\", startTimer );\n\n\t// Load Previous AutoLoad when selected from the Dropdown menu\n\t$( \"#\" + ddMenuID ).on( \"click\", \"li > a\", function( evt ){\n\t\tloadContent( $( evt.currentTarget ).data( \"id\" ) );\n\t} );\n\n\t// Update auto save menu\n\tupdateAutoSaveMenu();\n};\n","const { template } = require( \"lodash\" );\nconst { DateTime } = require( \"luxon\" );\n\n/**\n * Get widget selector URL\n */\nwindow.getWidgetSelectorURL = function(){ return $cbEditorConfig.adminEntryURL + \"/widgets/editorselector\"; };\n\n/**\n * Get widget preview URL\n */\nwindow.getWidgetPreviewURL = function(){ return $cbEditorConfig.adminEntryURL + \"/widgets/preview\"; };\n\n/**\n * Get widget editor instance URL\n */\nwindow.getWidgetEditorURL = function(){ return $cbEditorConfig.adminEntryURL + \"/widgets/editinstance\"; };\n\n/**\n * View widget instance\n */\nwindow.getWidgetInstanceURL = function(){ return $cbEditorConfig.adminEntryURL + \"/widgets/viewWidgetInstance\"; };\n\n/**\n * Get page editor selector\n */\nwindow.getPageSelectorURL = function(){ return $cbEditorConfig.adminEntryURL + \"/pages/editorselector\"; };\n\n/**\n * Blog Editor selector\n */\nwindow.getEntrySelectorURL = function(){ return $cbEditorConfig.isBlogDisabled ? \"\" : $cbEditorConfig.adminEntryURL + \"/entries/editorselector\"; };\n\n/**\n * Get contentstore selector\n */\nwindow.getContentStoreSelectorURL = function(){ return $cbEditorConfig.adminEntryURL + \"/contentStore/editorselector\"; };\n\n/**\n * Get content preview URL\n */\nwindow.getPreviewSelectorURL = function(){ return $cbEditorConfig.adminEntryURL + \"/content/preview\"; };\n\n/**\n * Get author editor preference\n */\nwindow.getAuthorEditorPreferenceURL = function(){ return $cbEditorConfig.adminEntryURL + \"/authors/changeEditor\"; };\n\n/**\n * Get author save preference\n */\nwindow.getAuthorSavePreferenceURL = function(){ return $cbEditorConfig.adminEntryURL + \"/authors/saveSinglePreference\"; };\n\n/**\n * Get a module URL link\n * @param  {string} module      The module\n * @param  {string} event       The event to execute\n * @param  {string} queryString The query string to build\n */\nwindow.getModuleURL = function( module, event, queryString ){\n\tlet returnURL = \"\";\n\n\t$.ajax( {\n\t\turl    \t: $cbEditorConfig.adminEntryURL + \"/modules/buildModuleLink\",\n\t\tdata   \t: { module: module, moduleEvent: event, moduleQS: queryString },\n\t\tasync  \t: false,\n\t\tsuccess : function( data ){\n\t\t\treturnURL = data;\n\t\t}\n\t} );\n\n\treturn returnURL.trim();\n};\n\n/**\n * Load the asset chooser from the media manager\n * @param  {Function} callback A call back URL to call for media item selections\n * @param  {numeric}   w        Window width\n * @param  {numeric}   h        Window height\n * @return {[type]}            [description]\n */\nwindow.loadAssetChooser = function( callback, w, h ){\n\topenRemoteModal(\n\t\t$cbEditorConfig.adminEntryURL + \"/ckFileBrowser/assetChooser?callback=\" + callback,\n\t\t{},\n\t\tw || \"75%\",\n\t\th\n\t);\n};\n\n/**\n * Switch editors\n * @param  {string} editorType The editor to switch to\n */\nwindow.switchEditor = function( editorType ){\n\t// Call change user editor preference\n\t$.ajax( {\n\t\turl    \t: getAuthorEditorPreferenceURL(),\n\t\tdata   \t: { editor: editorType },\n\t\tasync  \t: false,\n\t\tsuccess : function( data ){\n\t\t\tlocation.reload();\n\t\t}\n\t} );\n};\n\n/**\n * Setup the editors.\n *\n * @param theForm The form container for the editor\n * @param withExcerpt Using excerpt or not apart from the main 'content' object\n * @param saveURL The URL used for saving the content asynchronously\n * @param collapseNav Automatically collapse main navigation for better editing experience\n */\nwindow.setupEditors = function( theForm, withExcerpt, saveURL, collapseNav ){\n\t// Setup global editor elements\n\t$targetEditorForm   \t= theForm;\n\t$targetEditorSaveURL \t= saveURL;\n\t$uploaderBarLoader \t\t= $targetEditorForm.find( \"#uploadBarLoader\" );\n\t$uploaderBarStatus \t\t= $targetEditorForm.find( \"#uploadBarLoaderStatus\" );\n\t$excerpt\t\t\t\t= $targetEditorForm.find( \"#excerpt\" );\n\t$content \t\t\t\t= $targetEditorForm.find( \"#content\" );\n\t$isPublished \t\t\t= $targetEditorForm.find( \"#isPublished\" );\n\t$contentID\t\t\t\t= $targetEditorForm.find( \"#contentID\" );\n\t$changelog\t\t\t\t= $targetEditorForm.find( \"#changelog\" );\n\t$slug \t\t\t\t\t= $targetEditorForm.find( \"#slug\" );\n\t$publishingBar \t\t\t= $targetEditorForm.find( \"#publishingBar\" );\n\t$actionBar \t\t\t\t= $targetEditorForm.find( \"#actionBar\" );\n\t$publishButton \t\t\t= $targetEditorForm.find( \"#publishButton\" );\n\t$withExcerpt\t\t\t= withExcerpt || true;\n\t$wasSubmitted \t\t\t= false;\n\n\t// Startup the choosen editor via driver CFC\n\t$cbEditorStartup();\n\n\t// Activate date pickers\n\t$( \"[type=date]\" ).datepicker( { format: \"yyyy-mm-dd\" } );\n\t$( \".datepicker\" ).datepicker( { format: \"yyyy-mm-dd\" } );\n\n\t// Activate Form Validators\n\t$targetEditorForm.validate( {\n    \tignore      \t\t: \"content\",\n\t\tsubmitHandler\t: function( form ) {\n\t\t\t// Update Editor Content\n        \ttry {\n        \t\tupdateEditorContent();\n        \t} catch ( err ){\n        \t\tconsole.log( err );\n        \t};\n\n\t\t\t// Update excerpt\n\t\t\tif ( $withExcerpt ){\n\t\t\t\ttry {\n\t\t\t\t\tupdateEditorExcerpt();\n\t\t\t\t} catch ( err ){\n\t\t\t\t\tconsole.log( err );\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// if it's valid, submit form\n\t\t\tif ( $content.val().length ) {\n            \t// enable slug for saving.\n            \t$slug.prop( \"disabled\", false );\n            \t// Disable Publish Buttons\n            \t$publishButton.prop( \"disabled\", true );\n            \t// submit\n            \tform.submit();\n\t\t\t} else {\n            \talert( \"Please enter some content!\" );\n           \t}\n\t\t}\n\t} );\n\n\t// Changelog mandatory?\n\tif ( $cbEditorConfig.changelogMandatory ){\n\t\t$changelog.attr( \"required\", $cbEditorConfig.changelogMandatory );\n\t}\n\n\t// Activate blur slugify on titles\n\tlet $title = $targetEditorForm.find( \"#title\" );\n\t// set up live event for title, do nothing if slug is locked..\n\t$title.on( \"blur\", function(){\n\t\tif ( !$slug.prop( \"disabled\" ) ){\n\t\t\tcreatePermalink( $title.val() );\n\t\t}\n\t} );\n\t// Activate permalink blur\n\t$slug.on( \"blur\",function(){\n\t\tif ( !$( this ).prop( \"disabled\" ) ){\n\t\t\tpermalinkUniqueCheck();\n\t\t}\n\t} );\n\n\t// Editor dirty checks\n\twindow.onbeforeunload = askLeaveConfirmation;\n\n\t// counters\n\t$( \"#htmlKeywords\" ).keyup( function(){\n\t\t$( \"#html_keywords_count\" ).html( $( \"#htmlKeywords\" ).val().length );\n\t} );\n\t$( \"#htmlDescription\" ).keyup( function(){\n\t\t$( \"#html_description_count\" ).html( $( \"#htmlDescription\" ).val().length );\n\t} );\n\n\t// setup clockpickers\n\t$( \".clockpicker\" ).clockpicker();\n\n\t// setup autosave\n\tautoSave( $content, $contentID, \"contentAutoSave\" );\n\n\t// Collapse navigation for better editing experience\n\tlet bodyEl = $( \"#container\" );\n\tcollapseNav = collapseNav || true;\n\tif ( collapseNav && !$( bodyEl ).hasClass( \"sidebar-mini\" ) ){\n\t\t$( \"body\" ).removeClass( \"off-canvas-open\" );\n\t\t$( bodyEl ).toggleClass( \"sidebar-mini\" );\n\t}\n};\n\n/**\n * Checks if user wants to draft content that is published already\n * @return {boolean}\n */\nwindow.shouldPublish = function(){\n\t// Confirm if you really want to quick save if content is published already\n\tif ( $contentID.val().length && $isPublished.val() == \"true\" ){\n\t\treturn confirm(\n\t\t\t\"Your content is published already, quick saving it will draft it and unpublish it.\" +\n\t\t\t\"If you want to re-publish, just hit Publish again.\" +\n\t\t\t\"Are you sure you want to draft the content?\"\n\t\t);\n\t}\n\treturn true;\n};\n\n/**\n * Quick save content\n */\nwindow.quickSave = function(){\n\t// Confirm if you really want to quick save if content is published already\n\tif ( !shouldPublish() ){\n\t\treturn;\n\t}\n\n\t// Draft it\n\t$isPublished.val( \"false\" );\n\t// Make sure our status pill is correct\n\t$( \"td#publish-info\" ).html( \"<span class=\\\"p5 label label-default\\\">Draft</span>\" );\n\n\t// Commit Changelog default it to quick save if not set\n\tif ( !$changelog.val().length ){\n\t\t$changelog.val( \"quick save\" );\n\t}\n\t// Validation of Form First before quick save\n\tif ( !$targetEditorForm.valid() ){\n\t\tadminNotifier( \"error\", \"Form is not valid, please verify.\" );\n\t\treturn false;\n\t}\n\t// Verify Content\n\tif ( !getEditorContent().length ){\n\t\talert( \"Please enter content before saving.\" );\n\t\treturn;\n\t}\n\t// Activate Loader\n\ttoggleLoaderBar();\n\t// Save current content, just in case editor has not saved it\n\tif ( !$content.val().length ){\n\t\t$content.val( getEditorContent() );\n\t}\n\t// enable for quick save, if disabled\n\tlet disableSlug = false;\n\tif ( $slug.prop( \"disabled\" ) ){\n\t\t$slug.prop( \"disabled\", false );\n\t\tdisableSlug = true;\n\t}\n\t// Post it\n\t$.post(\n\t\t$targetEditorSaveURL,\n\t\t$targetEditorForm.serialize(),\n\t\tfunction( data ){\n\t\t\t// Clear out old auto-saves\n\t\t\tresetAutoSave();\n\t\t\t// Save new id\n\t\t\t$contentID.val( data.CONTENTID );\n\t\t\t// finalize\n\t\t\t$changelog.val( \"\" );\n\t\t\t$uploaderBarLoader.fadeOut( 1500 );\n\t\t\t$uploaderBarStatus.html( \"Draft Saved!\" );\n\t\t\t$isPublished.val( \"true\" );\n\t\t\t// bring back slug if needed.\n\t\t\tif ( disableSlug ){\n\t\t\t\t$slug.prop( \"disabled\", true );\n\t\t\t}\n\t\t\t// notify\n\t\t\tadminNotifier( \"info\", \"Draft Saved!\" );\n\t\t},\n\t\t\"json\"\n\t);\n};\n\n/**\n * Quick Live Preview\n * @return {[type]} [description]\n */\nwindow.previewContent = function(){\n\t// Open the preview window for content\n\topenRemoteModal(\n\t\tgetPreviewSelectorURL(),\n\t\t{\n\t\t\tcontent      \t: getEditorContent(),\n\t\t\tlayout       \t: $( \"#layout\" ).val(),\n\t\t\ttitle        \t: $( \"#title\" ).val(),\n\t\t\tslug         \t: $slug.val(),\n\t\t\tcontentType  \t: $( \"#contentType\" ).val(),\n\t\t\tmarkup       \t: $( \"#markup\" ).val(),\n\t\t\tparentContent\t: $( \"#parentContent\" ).val() || \"\"\n\t\t},\n\t\t$( window ).width() - 50,\n\t\t$( window ).height() - 200,\n\t\ttrue\n\t);\n};\n\n/**\n * Set the correct publish date to now\n */\nwindow.publishNow = function(){\n\tconst today = DateTime.now();\n\t$( \"#publishedTime\" ).val( today.toFormat( \"HH:mm\" ) );\n\t$( \"#publishedDate\" ).val( getToday() );\n};\n\n/**\n * Switch markup type\n * @param  {string} markupType The markup type\n */\nwindow.switchMarkup = function( markupType ){\n\t$( \"#markup\" ).val( markupType );\n\t$( \"#markupLabel\" ).html( markupType );\n};\n\n/**\n * Set that the form was submitted\n */\nwindow.setWasSubmitted = function(){\n\t$wasSubmitted = true;\n};\n\n/**\n * As for leave confirmation if content is dirty\n * @return {string} The confirmation message the browser will ask if set.\n */\nwindow.askLeaveConfirmation = function(){\n\tif ( checkIsDirty() && !$wasSubmitted ){\n   \t\treturn \"You have unsaved changes.\";\n   \t}\n};\n\n/**\n * Check if permalink is unique\n * @param  {string} linkToUse The link to check\n */\nwindow.permalinkUniqueCheck = function( linkToUse ){\n\tlinkToUse = linkToUse || $slug.val();\n\tlinkToUse = $.trim( linkToUse ); //slugify still appends a space at the end of the string, so trim here for check uniqueness\n\tif ( !linkToUse.length ){ return; }\n\t// Verify unique\n\t$.getJSON(\n\t\t$cbEditorConfig.slugCheckURL,\n\t\t{\n\t\t\tslug        : linkToUse,\n\t\t\tcontentID   : $( \"#contentID\" ).val(),\n\t\t\tcontentType : $( \"#contentType\" ).val()\n\t\t},\n\t\tfunction( data ){\n\t\t\tif ( !data.UNIQUE ){\n\t\t\t\t$( \"#slugCheckErrors\" )\n\t\t\t\t\t.html( \"The permalink slug you entered is already in use, please enter another one or modify it.\" )\n\t\t\t\t\t.addClass( \"alert alert-danger\" );\n\t\t\t} else {\n\t\t\t\t$( \"#slugCheckErrors\" )\n\t\t\t\t\t.html( \"\" )\n\t\t\t\t\t.removeClass( \"alert alert-danger\" );\n\t\t\t}\n\t\t}\n\t);\n};\n\n/**\n * Create a permalink\n * @param  {string} linkToUse [description]\n */\nwindow.createPermalink = function( linkToUse ){\n\tlet $title \t\t= $targetEditorForm.find( \"#title\" );\n\tlinkToUse \t= linkToUse || $title.val();\n\tif ( !linkToUse.length ){ return; }\n\n\ttogglePermalink();\n\n\t$.get(\n\t\t$cbEditorConfig.slugifyURL,\n\t\t{ slug: linkToUse },\n\t\tfunction( data ){\n\t\t\t$slug.val( data );\n\t\t\tpermalinkUniqueCheck();\n\t\t\ttogglePermalink();\n\t\t}\n\t);\n};\n\n/**\n * Toggle permalink\n */\nwindow.togglePermalink = function(){\n\tlet toggle = $( \"#togglePermalink\" );\n\t// Toggle lock icon on click..\n\ttoggle.hasClass( \"fa fa-lock\" ) ? toggle.attr( \"class\", \"fa fa-unlock\" ) : toggle.attr( \"class\", \"fa fa-lock\" );\n\t//disable input field\n\t$slug.prop( \"disabled\", !$slug.prop( \"disabled\" ) );\n};\n\n/**\n * Toggle draft mode or not\n * @return {boolean} Returns an indicator if we should publish or not\n */\nwindow.toggleDraft = function(){\n\t// Confirm if you really want to quick save if content is published already\n\tif ( !shouldPublish() ){\n\t\treturn false;\n\t}\n\t// set published bit to false\n\t$isPublished.val( \"false\" );\n\t// record we are submitting\n\tsetWasSubmitted();\n\treturn true;\n};\n\n/**\n * Quick publish\n *\n * @param  {Boolean} isDraft draft mode or publish\n */\nwindow.quickPublish = function( isDraft ){\n\tif ( isDraft ){\n\t\t// verify we can draft this content\n\t\tif ( !toggleDraft() ){\n\t\t\treturn;\n\t\t}\n\t} else {\n\t\t// set published bit\n\t\t$isPublished.val( \"true\" );\n\t\t// set was submitted\n\t\tsetWasSubmitted();\n\t}\n\n\t// Verify changelogs and open sidebar if closed:\n\tif ( $cbEditorConfig.changelogMandatory && !isMainSidebarOpen() ){\n\t\ttoggleSidebar();\n\t}\n\n\t// Clear out old auto-saves\n\tresetAutoSave();\n\n\t// submit form\n\t$targetEditorForm.submit();\n};\n\n/**\n * Toggle the loader bar visibility\n */\nwindow.toggleLoaderBar = function(){\n\t// Activate Loader\n\t$uploaderBarStatus.html( \"Saving...\" );\n\t$uploaderBarLoader.slideToggle();\n};\n\n/**\n * Featured image callback\n * @param  {string} filePath The file path\n * @param  {string} fileURL  The file URL\n * @param  {string} fileType Directory or file\n */\nwindow.featuredImageCallback = function( filePath, fileURL, fileType ){\n\tif ( $( \"#featuredImage\" ).val().length ){ cancelFeaturedImage(); }\n\t$( \"#featuredImageControls\" ).toggleClass( \"hide\" );\n\t$( \"#featuredImage\" ).val( filePath );\n\t$( \"#featuredImageURL\" ).text( fileURL );\n\t$( \"#featuredImagePreview\" ).attr( \"src\", fileURL );\n\tcloseRemoteModal();\n};\n\n/**\n * Cancel featured image\n */\nwindow.cancelFeaturedImage = function(){\n\t$( \"#featuredImage\" ).val( \"\" );\n\t$( \"#featuredImageURL\" ).val( \"\" );\n\t$( \"#featuredImagePreview\" ).attr( \"src\", \"\" );\n\t$( \"#featuredImageControls\" ).toggleClass( \"hide\" );\n};\n\nwindow.onContentTemplateChange = function( e ){\n\tlet templateId = e.target.value;\n\tif ( !templateId || templateId == \"null\" ) return;\n\t// TODO: Replace this with a more elegant promise-based confirmation\n\tif ( confirm( \"Changing the content template may add new custom fields and change values of this content item. Are you sure you want to do this?\" ) ){\n\t\treturn applyContentTemplate( templateId, true );\n\t}\n};\n\nwindow.saveAsContentTemplate = function(){\n\t$( \"[name=saveAsTemplate]\" ).val( true );\n\tquickPublish( true );\n};\n\nwindow.applyContentTemplate = function( templateId ){\n\tif ( templateId instanceof Event  ){\n\t\ttemplateId = templateId.currentTarget.value;\n\t}\n\tif ( templateId != \"null\" ){\n\t\tfetch(\n\t\t\t`/cbapi/v1/content-templates/${templateId}`,\n\t\t\t{ headers: { \"Authorization\": `Bearer ${window.authentication.access_token}` } }\n\t\t).then( r => r.json() )\n\t\t\t.then( response => {\n\t\t\t\t$( \".template-highlight-info\" ).removeClass( \"hidden\" );\n\t\t\t\twindow.assignedTemplate = response.data;\n\t\t\t\tObject.keys( response.data.definition ).forEach( key => applyContentTemplateToField( key, response.data.definition ) );\n\t\t\t} )\n\t\t\t.catch( error => {\n\t\t\t\t$dispatch(\n\t\t\t\t\t\"add-alert\",\n\t\t\t\t\t{\n\t\t\t\t\t\t\"type\"    : \"api\",\n\t\t\t\t\t\t\"class\"   : \"danger\",\n\t\t\t\t\t\t\"message\" : error.toString()\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tthrow error;\n\t\t\t} );\n\t} else {\n\t\t$( \".template-highlight-info\" ).addClass( \"hidden\" );\n\t\t$( \".template-restricted\" ).removeClass( \"template-restricted\" );\n\t\t$( \".template-defined\" ).removeClass( \"template-defined\" );\n\t}\n\n};\n\nwindow.announceModifiedByTemplate = function(){\n\tif ( document.getElementById( \"contentID\" ).value && !window.alerts.some( alert => alert.type == \"template\" ) ){\n\t\t$dispatch(\n\t\t\t\"add-alert\",\n\t\t\t{\n\t\t\t\t\"type\"    : \"template\",\n\t\t\t\t\"class\"   : \"warning\",\n\t\t\t\t\"message\" : \"This content item has been modified by changes to the assigned template. You will need to re-save or re-publish this item for the template changes to take effect.\"\n\t\t\t}\n\t\t);\n\t}\n};\n\nwindow.applyContentTemplateToField = function( fieldName, definition ){\n\tconsole.log( definition );\n\tif ( definition.hasOwnProperty( fieldName ) ){\n\t\tswitch ( fieldName ){\n\t\tcase \"customFields\":{\n\t\t\tdefinition.customFields.value.forEach(\n\t\t\t\tfieldDefinition => {\n\t\t\t\t\tlet customFields = document.getElementById( \"customFields\" );\n\t\t\t\t\tlet isApplied = !!( customFields.getElementsByClassName( \"customFieldKey\" ).length && Array.from( customFields.getElementsByClassName( \"customFieldKey\" ) ).some( el => el.value == fieldDefinition.name ) );\n\t\t\t\t\tif ( !isApplied ){\n\t\t\t\t\t\t$dispatch( \"add-custom-field\", { \"key\": fieldDefinition.name, \"value\": fieldDefinition.defaultValue } );\n\t\t\t\t\t\tconsole.log( \"custom field created: \" + fieldName );\n\t\t\t\t\t\tannounceModifiedByTemplate();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet nodeIndex = Array.from( customFields.getElementsByClassName( \"customFieldKey\" ) ).findIndex( option => option.value == fieldDefinition.name );\n\t\t\t\t\t\tlet valueOption = customFields.getElementsByClassName( \"customFieldValue\" )[ nodeIndex ];\n\t\t\t\t\t\tif ( !valueOption.value && fieldDefinition.defaultValue ){\n\t\t\t\t\t\t\tvalueOption.value = fieldDefinition.defaultValue;\n\t\t\t\t\t\t\tconsole.log( \"exisiting custom field modified: \" + fieldName );\n\t\t\t\t\t\t\tannounceModifiedByTemplate();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"categories\" : {\n\t\t\tdefinition.categories.value.forEach( cat => $( `[value=${cat}]`, \"#categoriesChecks\" ).attr( \"checked\", \"checked\" ).attr( \"readonly\", \"readonly\" ).parent().addClass( \"template-defined\" ).addClass( \"template-restricted\" ) );\n\t\t\tbreak;\n\t\t}\n\t\tdefault : {\n\t\t\tlet $templateField = $( `[name=${fieldName}]` );\n\t\t\tif ( $templateField.length ){\n\t\t\t\tlet nodeType = $templateField[ 0 ].nodeType;\n\t\t\t\tswitch ( nodeType ){\n\t\t\t\tcase \"radio\":\n\t\t\t\tcase \"checkbox\":{\n\t\t\t\t\t$templateField.each(\n\t\t\t\t\t\t$check => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t$check.prop( \"value\" ) == definition[ fieldName ].value\n\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\tif ( !$check.prop( \"checked\" ) ){\n\t\t\t\t\t\t\t\t\t$check.click();\n\t\t\t\t\t\t\t\t\tconsole.log( \"checkbox modified: \" + fieldName );\n\t\t\t\t\t\t\t\t\tannounceModifiedByTemplate();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$check.attr( \"readonly\", \"readonly\" ).parent().addClass( \"template-restricted\" ).addClass( \"template-defined\" );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:{\n\t\t\t\t\tif ( $templateField[ 0 ].localName == \"select\" ){\n\t\t\t\t\t\tif ( typeof( definition[ fieldName ].value ) == \"boolean\" ){\n\t\t\t\t\t\t\tdefinition[ fieldName ].value = definition[ fieldName ].value ? \"Yes\" : \"No\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet $options = $( \"option\", $templateField );\n\t\t\t\t\t\t$options.each(\n\t\t\t\t\t\t\tindex => {\n\t\t\t\t\t\t\t\tlet $option = $( $options[ index ] );\n\t\t\t\t\t\t\t\tlet $values = Array.isArray( definition[ fieldName ].value )\n\t\t\t\t\t\t\t\t\t? definition[ fieldName ].value\n\t\t\t\t\t\t\t\t\t: definition[ fieldName ].value.split( \",\" );\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t$values.indexOf( $option.val() ) > -1\n\t\t\t\t\t\t\t\t\t\t\t&&\n\t\t\t\t\t\t\t\t\t\t\t!$option.attr( \"selected\" )\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\t$option.attr( \"selected\", true );\n\t\t\t\t\t\t\t\t\tconsole.log( \"select modified: \" + fieldName );\n\t\t\t\t\t\t\t\t\tannounceModifiedByTemplate();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( !$templateField.attr( \"multiple\" ) ){\n\t\t\t\t\t\t\t$templateField.attr( \"readonly\", \"readonly\" ).addClass( \"template-restricted\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$templateField.parent().addClass( \"template-defined\" );\n\t\t\t\t\t} else if ( !$templateField.val() && definition[ fieldName ].value ) {\n\t\t\t\t\t\tif ( fieldName == \"content\" || fieldName == \"excerpt\" ){\n\t\t\t\t\t\t\tsetEditorContent( fieldName, definition[ fieldName ].value );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$templateField.val( definition[ fieldName ].value );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$templateField.parent().addClass( \"template-defined\" );\n\t\t\t\t\t\tannounceModifiedByTemplate();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn( `A field matching the name of ${fieldName} could not be found in the rendered editor. This template field cannot be validated or applied.` );\n\t\t\t}\n\n\t\t}\n\t\t}\n\t}\n};\n","/**\n *********************************************************************************\n * Copyright since 2005 ColdBox Framework by Luis Majano and Ortus Solutions, Corp\n * www.coldbox.org | www.luismajano.com | www.ortussolutions.com\n *********************************************************************************\n * This callbacks js is used to place common editor, OS software callbacks so they\n * can be reused.  You can also modify it to add your own.\n */\n\n/**\n * CKEditor Call Back\n * @param sPath\n * @param sURL\n * @param sType\n */\nwindow.fbCKSelect = function( sPath, sURL, sType ){\n\t/**\n\t * Get specific URL param\n\t * @param  {string} paramName Param Nam\n\t * @return {string}           The cleaned param name\n\t */\n\tvar getURLParam = function( paramName ){\n\t\tvar reParam \t= new RegExp( \"(?:[\\?&]|&amp;)\" + paramName + \"=([^&]+)\", \"i\" );\n\t\tvar match \t= window.location.search.match( reParam );\n\t\treturn ( match && match.length > 1 ) ? match[ 1 ] : \"\" ;\n\t};\n\n\tif ( !sPath.length || sType === \"dir\" ){\n\t\talert( \"Please select a file first.\" );\n\t\treturn;\n\t}\n\tvar funcNum = getURLParam( \"CKEditorFuncNum\" );\n\twindow.opener.CKEDITOR.tools.callFunction( funcNum, sURL );\n\twindow.close();\n};\n/**\n * Generic close callback\n */\nwindow.fbGenericClose = function(){\n\twindow.close();\n};\n/**\n * Testing select calback\n * @param path\n * @param rPath\n * @param type\n */\nwindow.fbTestChoose = function( path, rPath, type ){\n\talert( \"Path: \" + path + \"\\n URL: \" + rPath + \"\\n Type: \" + type );\n};\n/**\n * Cancel called\n * @return {[type]} [description]\n */\nwindow.fbTestCancel = function(){\n\talert( \"Cancel Called\" );\n};\n\nwindow.fbUpload = function(){\n\t$( \"#uploadBar\" ).slideToggle();\n};\n\n/** Verifies which view is active */\nwindow.fbVerifyActiveView = function() {\n\tlet identifier = \"#\" + $listType.val() + $listFolder.val();\n\t$( identifier ).removeClass( \"btn-more\" ).addClass( \"btn-default\" );\n};\n"],"names":["require","window","contentListHelper","bootbox","REGEX_LOWER","REGEX_UPPER","REGEX_DIGIT","REGEX_DIGITS","REGEX_SPECIAL","$confirmIt","$","$remoteModal","toolTipSettings","animation","delay","show","hide","document","addEventListener","attr","toggleSidebar","undefined","fadeIn","attachModalListeners","activateContentSearch","activateConfirmations","activateTooltips","activateNavbarState","activateToggleCheckboxes","validator","setDefaults","ignore","highlight","element","closest","removeClass","addClass","success","text","remove","errorPlacement","error","is","appendTo","fn","resetValidations","form","this","currentForm","find","each","clearForm","data","resetForm","type","val","checked","collect","serializedArrayData","serializeArray","index","obj","name","value","setTimeout","toggleFlickers","activeTab","location","hash","tab","tinyKeys","Control+K","focus","boundItem","click","to","length","match","accordion","cookie","bind","active","on","e","width","isCollapsed","hasClass","ajax","url","preference","async","isMainSidebarOpen","sidebar","css","sidebarState","fadeOut","adminAction","action","actionURL","post","targetModule","ERROR","adminNotifier","message","toastr","$nav_search","$nav_search_results","focusin","animate","opacity","blur","keyup","_","debounce","$this","load","search","slideDown","target","closeSearchBox","slideUp","quickLinks","inURL","tooltip","hideAllTooltips","slideToggle","closeRemoteModal","modal","resetContainerForms","container","frm","closeModal","div","openModal","w","h","openRemoteModal","params","console","log","maxHeight","height","maxWidth","replace","setPreviewSize","activeBtn","modalDialog","orig","modalSize","toggle","siblings","html","change","inputMatch","prop","closeConfirmations","dataMessage","dataTitle","preventDefault","popup","winWidth","winHeight","xPosition","screen","yPosition","open","link","checkAll","id","checkByValue","recordID","getToday","us","DateTime","now","toFormat","importContent","$importForm","$importDialog","validate","submitHandler","submit","toggleMoreInfoPanel","contentId","toggleClass","passwordMeter","event","minLength","rules","lower","test","upper","digit","special","key","passwordValidator","toLocalString","dateTime","options","Date","toLocaleString","getDefaultDateTimeOptions","toLocaleDateString","toLocaleTimeString","dateStyle","timeStyle","scrollToHash","hashName","adminLink","uri","JSON_HEADER","$adminEntryPoint","$tableContainer","$tableURL","$searchField","$searchName","$contentForm","$bulkStatusURL","$cloneDialog","$parentID","$isSearching","contentLoad","criteria","page","parent","fAuthors","fCreators","fCategories","fStatus","showAll","args","contentFilter","resetFilter","reload","init","settings","adminEntryPoint","tableContainer","tableURL","searchField","searchName","contentForm","bulkStatusURL","cloneDialog","parentID","History","Adapter","getState","contentDrilldown","pushState","title","contentShowAll","contentPaginate","getInfoPanelContent","contentID","activateInfoPanels","popover","content","trigger","placement","activateQuickLook","$table","quickLookURL","which","bulkRemove","exportSelected","exportEvent","selected","push","alert","bulkChangeStatus","status","openCloneDialog","$cloneForm","resetHits","fetch","method","headers","body","JSON","stringify","then","response","json","messages","join","catch","resetBulkHits","autoSavePrefix","resetAutoSave","Modernizr","localstorage","saveStoreKey","saved","localStorage","getItem","parse","forEach","entry","removeItem","setItem","autoSave","editor","pageID","ddMenuID","opts","extend","storeMax","timeout","editorID","timer","savingActive","saveStore","addToStore","saveKey","callback","overMax","i","splice","removeOldSaves","updateAutoSaveMenu","ulList","newItemDate","fromFormat","dateTitle","diffNow","hours","toRelative","startTimer","clearTimeout","onTimer","autoSaveKey","compressToUTF16","getEditorContent","getContentEditor","evt","setEditorContent","decompressFromUTF16","loadContent","currentTarget","template","getWidgetSelectorURL","$cbEditorConfig","adminEntryURL","getWidgetPreviewURL","getWidgetEditorURL","getWidgetInstanceURL","getPageSelectorURL","getEntrySelectorURL","isBlogDisabled","getContentStoreSelectorURL","getPreviewSelectorURL","getAuthorEditorPreferenceURL","getAuthorSavePreferenceURL","getModuleURL","module","queryString","returnURL","moduleEvent","moduleQS","trim","loadAssetChooser","switchEditor","editorType","setupEditors","theForm","withExcerpt","saveURL","collapseNav","$targetEditorForm","$targetEditorSaveURL","$uploaderBarLoader","$uploaderBarStatus","$excerpt","$content","$isPublished","$contentID","$changelog","$slug","$publishingBar","$actionBar","$publishButton","$withExcerpt","$wasSubmitted","$cbEditorStartup","datepicker","format","updateEditorContent","err","updateEditorExcerpt","changelogMandatory","$title","createPermalink","permalinkUniqueCheck","onbeforeunload","askLeaveConfirmation","clockpicker","bodyEl","shouldPublish","confirm","quickSave","valid","toggleLoaderBar","disableSlug","serialize","CONTENTID","previewContent","layout","slug","contentType","markup","parentContent","publishNow","today","switchMarkup","markupType","setWasSubmitted","checkIsDirty","linkToUse","getJSON","slugCheckURL","UNIQUE","togglePermalink","get","slugifyURL","toggleDraft","quickPublish","isDraft","featuredImageCallback","filePath","fileURL","fileType","cancelFeaturedImage","onContentTemplateChange","templateId","applyContentTemplate","saveAsContentTemplate","Event","authentication","access_token","r","assignedTemplate","Object","keys","definition","applyContentTemplateToField","$dispatch","toString","announceModifiedByTemplate","getElementById","alerts","some","fieldName","hasOwnProperty","customFields","fieldDefinition","getElementsByClassName","Array","from","el","nodeIndex","findIndex","option","valueOption","defaultValue","categories","cat","$templateField","nodeType","$check","localName","$options","$option","isArray","split","indexOf","warn","fbCKSelect","sPath","sURL","sType","reParam","funcNum","RegExp","opener","CKEDITOR","tools","callFunction","close","fbGenericClose","fbTestChoose","path","rPath","fbTestCancel","fbUpload","fbVerifyActiveView","identifier","$listType","$listFolder"],"sourceRoot":""}